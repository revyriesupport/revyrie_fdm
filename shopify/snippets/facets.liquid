{% comment %}
  Renders facets (filtering and sorting)

  Accepts:
  - results: {Object} Collection or Search object
  - enable_filtering: {Boolean} Show filtering when true
  - enable_sorting: {Boolean} Show sorting when true
  - filter_type: {String} Type of filter
  - enable_grid_changer: {Boolean} Show grid changer when true

  Usage:
  {% render 'facets', results: collection, enable_filtering: true, enable_sorting: true, filter_type: 'vertical', enable_grid_changer: false %}
{% endcomment %}
<style>
  .hidden{
    display:none!important;
  }
</style>

{{ 'double-ranges.css' | asset_url | stylesheet_tag }}
{%- liquid
  assign sort_by = results.sort_by | default: results.default_sort_by
  assign total_active_values = 0
  if results.url
    assign results_url = results.url
  else
    assign terms = results.terms | escape
    assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
  endif
-%}

<div class="facets-container{% if filter_type == 'drawer' %} facets-container-drawer{% endif %}">
  <h1 id="price-currency-reference" class="hidden" style="opacity: 0;">$100</h1>
  {%- if filter_type == 'vertical' or filter_type == 'horizontal' -%}
    <facet-filters-form class="facets small-hide {% if filter_type == 'horizontal' %}facets__horizontal{% else if filter_type == 'vertical' %}facets__vertical{% endif %}">
      <form
        id="FacetFiltersForm"
        class="{% if filter_type == 'horizontal' %}facets__form{% else %}facets__form-vertical{% endif %}"
      >
        {%- if results.terms -%}
          <input type="hidden" name="q" value="{{ results.terms | escape }}">
          <input name="options[prefix]" type="hidden" value="last">
        {%- endif -%}

        {% if enable_filtering %}
          {% comment %} Heading is the first tabbable element on filter type horizontal {% endcomment %}
          <div
            id="FacetsWrapperDesktop"
            {% if filter_type == 'horizontal' %}
              class="facets__wrapper"
            {% endif %}
          >
            {%- if filter_type == 'horizontal' and results.filters != empty -%}
              <h2 class="facets__heading caption-large text-body hidden" id="verticalTitle" tabindex="-1">Filter:</h2>
            {%- endif -%}
            {% comment %} Pills are right below the title for filter type vertical {% endcomment %}
            {%- if filter_type == 'vertical' -%}
              <div class="active-facets active-facets-desktop">
                <div class="active-facets-vertical-filter">
                  {%- unless results.filters == empty -%}
                    <h2
                      class="facets__heading facets__heading--vertical caption-large text-body"
                      id="verticalTitle"
                      tabindex="-1"
                    >
                      Filter:
                    </h2>
                  {%- endunless -%}
                  <facet-remove class="active-facets__button-wrapper">
                    <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                      <span>Clear</span>
                    </a>
                  </facet-remove>
                </div>
                {%- for filter in results.filters -%}
                  {%- for value in filter.active_values -%}
                    <facet-remove>
                      <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                        <span class="active-facets__button-inner button button--tertiary">
                          {{ filter.label }}: {{ value.label | escape }}
                          <svg
                            aria-hidden="true"
                            focusable="false"
                            role="presentation"
                            width="12"
                            height="13"
                            class="icon icon-close-small"
                            viewBox="0 0 12 13"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path d="M8.48627 9.32917L2.82849 3.67098" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M2.88539 9.38504L8.42932 3.61524" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                          </svg>
                          <span class="visually-hidden">Clear filter</span>
                        </span>
                      </a>
                    </facet-remove>
                  {%- endfor -%}
                  {% if filter.type == 'price_range' %}
                    {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                      <facet-remove>
                        <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                          <span class="active-facets__button-inner button button--tertiary">
                            {%- if filter.min_value.value -%}
                              {{ filter.min_value.value | money }}
                            {%- else -%}
                              {{ 0 | money }}
                            {%- endif -%}
                            -
                            {%- if filter.max_value.value -%}
                              {{ filter.max_value.value | money }}
                            {%- else -%}
                              {{ filter.range_max | money }}
                            {%- endif -%}
                            <svg
                              aria-hidden="true"
                              focusable="false"
                              role="presentation"
                              width="12"
                              height="13"
                              class="icon icon-close-small"
                              viewBox="0 0 12 13"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path d="M8.48627 9.32917L2.82849 3.67098" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                              <path d="M2.88539 9.38504L8.42932 3.61524" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                            <span class="visually-hidden">Clear filter</span>
                          </span>
                        </a>
                      </facet-remove>
                    {%- endif -%}
                  {% endif %}
                {%- endfor -%}
              </div>
            {%- endif -%}
            <div
              id="desktop-filter-toggler"
              class="facets__details-list facets__details-tags facets__details-category facets__details-category disclosure-has-popup facets__disclosure"
            >
              <div class="facets__summary caption-large " aria-label="Filters">
                <div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="17" viewBox="0 0 19 17" fill="none">
                    <rect x="1" y="4" width="5" height="2" rx="1" fill="black"/>
                    <rect x="8" y="4" width="10" height="2" rx="1" fill="black"/>
                    <rect x="11" y="14" width="10" height="2" rx="1" transform="rotate(-180 11 14)" fill="black"/>
                    <rect x="18" y="14" width="5" height="2" rx="1" transform="rotate(-180 18 14)" fill="black"/>
                    <circle cx="7" cy="5" r="1.5" stroke="black"/>
                    <circle cx="12" cy="13" r="1.5" transform="rotate(-180 12 13)" stroke="black"/>
                  </svg>
                  <span style="font-weight: 600;">FILTER</span>
                </div>
              </div>
            </div>
            {% comment %} Filters for both horizontal and vertical filter {% endcomment %}
            {%- liquid
              assign has_category_filter = false
              if collectionSettings.storefront_filter_category_enable
                assign resultFilter = results.filters | where: 'label', 'More filters' | first
                if resultFilter.label == 'More filters'
                  assign filterLabel = 'Category'
                  assign filterClass = ''
                  assign customTags = ''
                  if results.metafields.global.filter_label
                    assign filterLabel = results.metafields.global.filter_label.value
                  endif
                  if results.metafields.global.filter_general.value == true
                    assign customTags = collectionSettings.storefront_filter_category_general | replace: ' ,', ',' | replace: ', ', ',' | split: ','
                  endif
                  if results.metafields.global.filter_custom
                    assign customTags = results.metafields.global.filter_custom.value | join: ',' | replace: ' ,', ',' | replace: ', ', ',' | split: ','
                  endif
                  if customTags != ''
                    assign has_category_filter = true
                  endif
                endif
              endif
            -%}
            {% if has_category_filter == true and collection.metafields.custom.hide_category_filter.value != true %}
              <details
                id="Details-{{ filterLabel | handleize }}-{{ section.id }}"
                class="filter_item hidden facets__details-{{ resultFilter.type }} facets__details-tags facets__details-category facets__details-{{ filterLabel | handleize }}{% if filter_type == 'horizontal' %} disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter{{ filterClass }}"
                data-index="{{ filterLabel | handleize }}"
                data-label="{{ filterLabel }}"
                {% if filter_type == 'vertical' %}
                  open
                {% endif %}
              >
                <summary
                  class=" facets__summary caption-large focus-offset"
                  aria-label="{{ filterLabel }} ({{ resultFilter.active_values.size }} selected)"
                >
                  <div>
                    <span>
                      {{- filterLabel -}}
                      <span class="facets__selected no-js-hidden count{% if resultFilter.active_values.size == 0 %} hidden{% endif %}">
                        ({{ resultFilter.active_values.size }})</span
                      ></span
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" class="arrow" viewBox="4.82 6.32 8.36 4.91">
                      <path d="M9.0001 11.2328C8.9001 11.2328 8.80335 11.2141 8.70985 11.1766C8.61585 11.1391 8.5376 11.0891 8.4751 11.0266L5.0251 7.57656C4.8876 7.43906 4.81885 7.26406 4.81885 7.05156C4.81885 6.83906 4.8876 6.66406 5.0251 6.52656C5.1626 6.38906 5.3376 6.32031 5.5501 6.32031C5.7626 6.32031 5.9376 6.38906 6.0751 6.52656L9.0001 9.45156L11.9251 6.52656C12.0626 6.38906 12.2376 6.32031 12.4501 6.32031C12.6626 6.32031 12.8376 6.38906 12.9751 6.52656C13.1126 6.66406 13.1813 6.83906 13.1813 7.05156C13.1813 7.26406 13.1126 7.43906 12.9751 7.57656L9.5251 11.0266C9.4501 11.1016 9.36885 11.1546 9.28135 11.1856C9.19385 11.2171 9.1001 11.2328 9.0001 11.2328Z" fill="black"></path>
                    </svg>
                  </div>
                </summary>
                <div
                  id="Facet-{{ filterLabel | handleize }}-{{ section.id }}"
                  class="parent-display {% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                >
                  <fieldset class="facets-wrap parent-wrap {% if filter_type == 'vertical' %} facets-wrap-vertical{% endif %}">
                    <legend class="visually-hidden">{{ filterLabel | escape }}</legend>
                    {%- liquid
                      assign filterTagCustomValues = ''
                      assign filterTagCustomValuesNoJS = ''
                      assign customTags = customTags | sort
                    -%}
                    {%- capture filterTag -%}
                      {%- assign forloopIndex = 0 -%}
                      {%- for customTag in customTags -%}
                        {%- liquid
                          assign forloopIndex = forloopIndex | plus: 1
                          assign valueParamName = 'filter.p.tag'
                          assign valueValue = customTag
                          assign valueActive = false
                          assign valueCount = 1
                        -%}
                        {%- for i in (1..2) -%}
                          {%- capture temp -%}
                            <li class="list-menu__item facets__item{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}">
                              <label for="Filter-tag-category-{{ valueValue | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if valueCount == 0 and valueActive == false %} facet-checkbox--disabled ff{% endif %}" data-index="{{ forloopIndex }}">
                                <input type="checkbox"
                                  name="{{ valueParamName }}"
                                  value="{{ valueValue }}"
                                  id="Filter-tag-category-{{ valueValue | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                  {% if valueActive %}checked{% endif %}
                                  {% if valueCount == 0 and valueActive == false %}disabled{% endif %}
                                >

                                <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                  <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                </svg>

                                <span aria-hidden="true">{{ customTag }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                <span class="visually-hidden">{{ customTag }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                              </label>
                            </li>
                          {%- endcapture -%}
                          {%- liquid
                            assign filterSize = customTags | size
                            if i == 1
                              capture filterTagCustomValues
                                echo filterTagCustomValues
                                echo temp
                              endcapture
                            else
                              capture filterTagCustomValuesNoJS
                                echo filterTagCustomValuesNoJS
                                echo temp
                              endcapture
                            endif
                          -%}
                        {%- endfor -%}
                      {%- endfor -%}
                      {%- if filterTagCustomValues != '' -%}
                        <ul class=" {%- if filterSize > 10 -%}-grid-dropped-category-{%- endif -%}  {% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden" role="list">
                          {{ filterTagCustomValues }}
                        </ul>
                        {% comment %} No show more for no JS {% endcomment %}
                        <ul class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-list no-js-facets" role="list">
                          {{ filterTagCustomValuesNoJS }}
                        </ul>
                      {%- endif -%}
                    {%- endcapture -%}
                    {%- liquid
                      echo filterTag
                    -%}
                  </fieldset>
                  {%- if filter_type != 'vertical' -%}
                    <div class="facets__header bottom">
                      <span class="facets__selected no-js-hidden">{{ resultFilter.active_values.size }} selected</span>
                      <facet-remove>
                        <a href="{{ resultFilter.url_to_remove }}" class="facets__reset link underlined-link">
                          CLEAR
                        </a>
                      </facet-remove>
                    </div>
                  {%- endif -%}
                  {%- if resultFilter.values.size > 10 and filter_type == 'vertical' -%}
                    <show-more-button>
                      <button
                        class="button-show-more link underlined-link no-js-hidden"
                        id="Show-More-{{ filterLabel | handleize }}-{{ section.id }}"
                        type="button"
                      >
                        <span class="label-show-more label-text"><span aria-hidden="true">+ </span>Show more</span>
                        <span class="label-show-less label-text hidden"
                          ><span aria-hidden="true">- </span>Show less</span
                        >
                      </button>
                    </show-more-button>
                  {%- endif %}
                </div>
              </details>
            {% endif %}

            {%- for filter in results.filters -%}
              {%- assign total_active_values = total_active_values | plus: filter.active_values.size -%}
              {% case filter.type %}
                {% when 'boolean', 'list' %}
                  {%- unless filter.label == 'Product type' or filter.label == 'More filters' -%}
                    <details
                      id="Details-{{ forloop.index }}-{{ section.id }}"
                      class="
                        --- {{ filter.label }} {{ collection.metafields.custom.hide_size_filter.value | json }} filter_item hidden facets__details-{{ filter.type }}

                        {% if filter.label == 'More filters' %} facets__details-tags{% endif %} facets__details-{%- if filter.label == 'More filters' -%}color{% else %}{{ filter.label | handleize }}{% endif %}{% if filter_type == 'horizontal' %} disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter
                      "
                      data-index="{{ forloop.index }}"
                      data-label="{%- if filter.label == 'More filters' -%}Color{% else %}{{ filter.label }}{% endif %}"
                      {% if filter_type == 'vertical' and forloop.index == 1 %}
                        open
                      {% endif %}
                    >
                      <summary
                        {% if filter.label == 'Color' or filter.label == 'More filters' %}
                          {% assign valuesCountNoIvory = 0 %}
                          {% for value in filter.values %}
                            {% if value.active and value.label != 'ivory' %}
                              {% assign valuesCountNoIvory = valuesCountNoIvory | plus: 1 %}
                            {% endif %}
                          {% endfor %}
                        {% endif %}
                        class="facets__summary caption-large focus-offset {% if filter.label == "Size" and collection.metafields.custom.hide_size_filter.value == true %} hidden {% endif %}"
                        aria-label="{%- if filter.label == 'More filters' -%}Color{% else %}{{ filter.label }}{% endif %} ({{ filter.active_values.size }} selected)"
                      >
                        <div>
                          <span>
                            {%- if filter.label == 'More filters' -%}
                              Color
                            {% else %}
                              {{ filter.label | escape }}
                            {% endif %}
                            <span class="{%- if filter.label == 'Size' -%}sizes-count {% else %} colors-count {% endif %} facets__selected no-js-hidden {% if filter.active_values.size == 0 %} hidden{% endif %}">
                              {%- if filter.label != 'Size' -%}({{ valuesCountNoIvory }}) {% endif %}
                            </span>
                          </span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            class="arrow"
                            viewBox="4.82 6.32 8.36 4.91"
                          >
                            <path d="M9.0001 11.2328C8.9001 11.2328 8.80335 11.2141 8.70985 11.1766C8.61585 11.1391 8.5376 11.0891 8.4751 11.0266L5.0251 7.57656C4.8876 7.43906 4.81885 7.26406 4.81885 7.05156C4.81885 6.83906 4.8876 6.66406 5.0251 6.52656C5.1626 6.38906 5.3376 6.32031 5.5501 6.32031C5.7626 6.32031 5.9376 6.38906 6.0751 6.52656L9.0001 9.45156L11.9251 6.52656C12.0626 6.38906 12.2376 6.32031 12.4501 6.32031C12.6626 6.32031 12.8376 6.38906 12.9751 6.52656C13.1126 6.66406 13.1813 6.83906 13.1813 7.05156C13.1813 7.26406 13.1126 7.43906 12.9751 7.57656L9.5251 11.0266C9.4501 11.1016 9.36885 11.1546 9.28135 11.1856C9.19385 11.2171 9.1001 11.2328 9.0001 11.2328Z" fill="black"></path>
                          </svg>
                        </div>
                      </summary>
                      <div
                        id="Facet-{{ forloop.index }}-{{ section.id }}"
                        class="parent-display {% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                      >
                        <fieldset class="facets-wrap parent-wrap {% if filter_type == 'vertical' %} facets-wrap-vertical{% endif %}">
                          <legend class="visually-hidden">{{ filter.label | escape }}</legend>
                          {%- if filter.label == 'Size'
                            and collectionSettings.storefront_filter_size_bra != ''
                            and collectionSettings.storefront_filter_size_panties != ''
                            and collectionSettings.storefront_filter_size_clothing != ''
                          -%}
                            {%- liquid
                              assign filterValues = filter.values | sort: 'value'
                              assign storefrontFilterSizes = 0
                            -%}
                            {%- capture storefrontFilterSize -%}
                              {%- liquid
                                assign filterSizesCustom = "Clothing,Panties and Garters,Bras" | split: ','
                                assign filterSizeCustomValues = ''
                                assign filterSizeCustomValuesNoJS = ''
                              -%}
                              {%- for filterSizeCustom in filterSizesCustom -%}
                                {%- liquid
                                  assign storefront_filter_size = ''
                                  assign storefront_filter_size_type = ''
                                  case filterSizeCustom
                                    when 'Bras'
                                      assign storefront_filter_size = collectionSettings.storefront_filter_size_bra
                                    when 'Panties and Garters'
                                      assign storefront_filter_size = collectionSettings.storefront_filter_size_panties
                                    when 'Clothing'
                                      assign storefront_filter_size = collectionSettings.storefront_filter_size_clothing
                                  endcase
                                  assign storefront_filter_size_type = storefront_filter_size_type | split: ','

                                  assign foundSizeType = false
                                  assign valueDisabled = true



                                -%}

                                {%- if storefront_filter_size != '' -%}
                                  {%- liquid
                                    assign storefront_filter_size = storefront_filter_size | split: ','

                                    assign filterSizes = 0
                                    assign selectedCount = 0
                                  -%}


                                      {%- assign forloopIndex = 0 -%}
                                      {%- for sizeCustom in storefront_filter_size -%}
                                        {%- liquid
                                        assign forloopIndex = forloopIndex | plus: 1

                                        -%}
                                        {%- unless sizeCustom contains '=' -%}
                                          {% assign sizeCustomDownCase = sizeCustom | downcase %}

                                          {%- for value in filterValues -%}
                                            {% if value.active == true %}
                                              {% assign selectedCount = selectedCount | plus: 1  %}
                                            {% endif %}
                                            {%- assign valueDownCase = value.value | downcase -%}
                                            {%- if sizeCustom == value.value -%}
                                              {%- assign forloopIndex = forloopIndex | plus: 1 -%}
                                              {%- for i in (1..2) -%}
                                                {%- capture temp -%}
                                                  <li
                                                  class="list-menu__item facets__item{% if value.count == 0 and value.active == false %} list-menu__item--disabled{% endif %}{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %} {% if value.active == true %} active {% endif  %}">
                                                    <size-check data-index="{{ forloopIndex }}">

                                                      <label for="Filter-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                                        <input type="checkbox"
                                                          name="{{ value.param_name }}"
                                                          value="{{ value.value }}"
                                                          data-size-label="{{ value.label | escape }}"
                                                          id="Filter-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                          {% if value.active %}checked{% endif %}
                                                          {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                                        >
                                                        <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                                          <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                                        </svg>

                                                        <span aria-hidden="true">{{ value.label | escape }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                                        <span class="visually-hidden">{{ value.label | escape }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                                                      </label>
                                                    </size-check>
                                                  </li>
                                                {%- endcapture -%}
                                                {%- liquid
                                                  if i == 1
                                                    capture filterSizeCustomValues
                                                      echo filterSizeCustomValues
                                                      echo temp
                                                    endcapture
                                                  else
                                                    capture filterSizeCustomValuesNoJS
                                                      echo filterSizeCustomValuesNoJS
                                                      echo temp
                                                    endcapture
                                                  endif
                                                -%}
                                              {%- endfor -%}
                                            {%- endif -%}
                                          {%- endfor -%}
                                        {%- else -%}

                                          {%- liquid
                                            assign sizeCustomValue = sizeCustom | split: '=' | first
                                            assign sizeCustomDownCase = sizeCustomValue | downcase
                                            assign sizeCustomLabel = sizeCustom | split: '=' | last
                                          -%}
                                          {%- unless sizeCustomValue contains ';' -%}
                                            {%- for value in filterValues -%}
                                              {% if value.active == true %}
                                                {% assign selectedCount = selectedCount | plus: 1  %}
                                              {% endif %}
                                              {%- assign valueDownCase = value.value | downcase -%}
                                              {%- if sizeCustomValue == value.value  -%}
                                                {%- assign forloopIndex = forloopIndex | plus: 1 -%}
                                                {%- for i in (1..2) -%}
                                                  {%- capture temp -%}
                                                    <li
                                                      class="list-menu__item facets__item{% if valueDisabled == true or value.count == 0 and value.active == false %} list-menu__item--disabled{% endif %}{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %} {% if value.active == true %} active {% endif  %} ">
                                                      <size-check data-index="{{ forloopIndex }}">

                                                        <label for="Filter-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if valueDisabled == true or value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                                          <input type="checkbox"
                                                            name="{{ value.param_name }}"
                                                            value="{{ value.value }}"
                                                            data-size-label="{{ sizeCustomLabel | escape }}"
                                                            id="Filter-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                            {% if value.active %}checked{% endif %}
                                                            {% if valueDisabled == true or value.count == 0 and value.active == false %}disabled{% endif %}
                                                          >
                                                          <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                                            <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                                          </svg>

                                                          <span aria-hidden="true">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                                          <span class="visually-hidden">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                                                        </label>
                                                      </size-check>
                                                    </li>
                                                  {%- endcapture -%}
                                                  {%- liquid
                                                    if i == 1
                                                      capture filterSizeCustomValues
                                                        echo filterSizeCustomValues
                                                        echo temp
                                                      endcapture
                                                    else
                                                      capture filterSizeCustomValuesNoJS
                                                        echo filterSizeCustomValuesNoJS
                                                        echo temp
                                                      endcapture
                                                    endif
                                                  -%}
                                                {%- endfor -%}
                                              {%- endif -%}
                                            {%- endfor -%}

                                          {%- else -%}
                                            {%- liquid
                                              assign sizeCustomValueArray = sizeCustomValue | split: ';'
                                              assign valueDisabled = true
                                              assign selectedCount = 0
                                              assign sizeExist = false
                                            -%}
                                            {%- for sizeCustomValueA in sizeCustomValueArray -%}
                                              {%- for value in filterValues -%}
                                                {%- assign valueDownCase = value.value | downcase -%}
                                                {%- assign sizeCustomValueADowncase = sizeCustomValueA | downcase -%}
                                                {%- if sizeCustomValueA == value.value -%}
                                                  {% assign sizeExist = true %}
                                                  {% unless value.count == 0 and value.active == false %}
                                                    {% assign valueFor = value.value %}
                                                    {% assign valueDisabled = false %}
                                                  {% endunless %}
                                                  {% if value.active == true %}
                                                    {% assign selectedCount = selectedCount | plus: 1  %}
                                                  {% endif %}
                                                  {% break %}
                                                {%- endif -%}
                                              {%- endfor -%}
                                            {%- endfor -%}
                                            {%- if sizeExist -%}
                                              {%- assign forloopIndex = forloopIndex | plus: 1 -%}
                                              {%- for i in (1..2) -%}
                                                {%- capture temp -%}
                                                  <li
                                                    class="list-menu__item facets__item{% if valueDisabled == true or value.count == 0 and value.active == false %} list-menu__item--disabled{% endif %}{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}  {% if selectedCount != 0 %} active {% endif  %}">
                                                    <size-check data-index="{{ forloopIndex }}">

                                                      <label for="Filter-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ valueFor | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if valueDisabled == true or value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                                        {%- for sizeCustomValueA in sizeCustomValueArray -%}
                                                          {%- for value in filterValues -%}
                                                            {%- assign valueDownCase = value.value | downcase -%}
                                                            {%- if sizeCustomValueA == value.value -%}
                                                              <input type="checkbox"
                                                                name="{{ value.param_name }}"
                                                                value="{{ value.value }}"
                                                                {% comment %}
                                                                  this is the unique who needs the data size label
                                                                {% endcomment %}
                                                                data-size-label="{{ sizeCustomLabel | escape }}"
                                                                id="Filter-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                                {% if value.active %}checked{% endif %}
                                                                {% if valueDisabled == true or value.count == 0 and value.active == false %}disabled{% endif %}
                                                              >
                                                              {% break %}
                                                            {%- endif -%}
                                                          {%- endfor -%}

                                                        {%- endfor -%}

                                                        <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                                          <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                                        </svg>

                                                        <span aria-hidden="true">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                                        <span class="visually-hidden">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                                                      </label>
                                                    </size-check>
                                                  </li>
                                                {%- endcapture -%}
                                                {%- liquid
                                                  if i == 1
                                                    capture filterSizeCustomValues
                                                      echo filterSizeCustomValues
                                                      echo temp
                                                    endcapture
                                                  else
                                                    capture filterSizeCustomValuesNoJS
                                                      echo filterSizeCustomValuesNoJS
                                                      echo temp
                                                    endcapture
                                                  endif
                                                -%}
                                              {%- endfor -%}
                                            {%- endif -%}
                                          {%- endunless -%}
                                        {%- endunless -%}

                                      {%- endfor -%}


                                {%- endif -%}


                              {%- endfor -%}
                              {%- if filterSizeCustomValues != '' -%}
                                {% liquid
                                 assign filterSize = filterSizeCustomValues | size
                                 assign isBig = false
                                 if filterSize > 21370
                                   assign isBig = true
                                 endif
                                %}

                                {%- assign filterSizes = 1 -%}

                                <ul class="{%- if isBig -%}grid-dropped{%- endif -%} {% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden" role="list">
                                  {{ filterSizeCustomValues }}
                                {%- if isBig == '5' -%}
                                  <li class="list-menu__item facets__item  ">
                                    <div class="facets__header bottom " style="padding:0px">
                                      <span class="facets__selected no-js-hidden">{{ filter.active_values.size }} selected</span>
                                      <facet-remove>
                                        <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                                          CLEAR
                                        </a>
                                      </facet-remove>
                                    </div>
                                  </li>

                                {%- endif -%}
                                </ul>
                                {% comment %} No show more for no JS {% endcomment %}
                                <ul class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-list no-js-facets" role="list">
                                  {{ filterSizeCustomValuesNoJS }}
                                </ul>
                              {%- endif -%}
                            {%- endcapture -%}
                            <div class="facets__list-wrap">
                              {{ storefrontFilterSize }}
                            </div>

                          {%- else -%}
                            {%- assign color_swatch_config = settings.color_swatch_config
                              | newline_to_br
                              | split: '<br />'
                            -%}

                            {%- if filter.label == 'More filters' -%}
                              {%- liquid
                                assign storefrontFilterColors = 0
                                assign storefront_filter_color = collectionSettings.storefront_filter_color
                                assign storefront_filter_color_custom = ''
                              -%}
                              {%- if storefront_filter_color != '' -%}
                                {%- liquid
                                  assign storefront_filter_color = storefront_filter_color | split: ','
                                  assign filterColorCustomValues = ''
                                  assign filterColorCustomValuesNoJS = ''
                                  assign filterColors = 0
                                -%}
                                {%- capture filterColor -%}
                                  {%- assign forloopIndex = 0 -%}
                                  {%- for colorCustom in storefront_filter_color -%}
                                    {%- liquid
                                      assign forloopIndex = forloopIndex | plus: 1
                                      assign colorCustomValue = colorCustom | split: '=' | first
                                      assign colorCustomLabel = colorCustom | split: '=' | last

                                      assign valueParamName = 'filter.p.tag'
                                      assign valueValue = colorCustomValue
                                      assign valueActive = false
                                      assign valueCount = 1
                                    -%}
                                    {%- for i in (1..2) -%}
                                      {%- capture temp -%}
                                        <li class="list-menu__item facets__item facets__item--color">
                                          <color-check data-index="{{ forloopIndex }}">
                                            {%- if colorCustomValue contains ';' -%}
                                              {%- liquid
                                                assign colorCustomValueArray = colorCustomValue | split: ';'
                                                assign valueValueTemp = colorCustomValueArray.first
                                              -%}
                                              {%- for colorCustomValueA in colorCustomValueArray -%}
                                                <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                  name="{{ valueParamName }}"
                                                  value="{{ colorCustomValueA }}"
                                                  id="Filter-tag-color-{{ colorCustomValueA | handleize }}-{{ forloopIndex }}-{{ forloop.index }}{% if i == 2 %}-no-js{% endif %}"
                                                  {% if valueActive %}checked{% endif %}
                                                  {% if valueCount == 0 and valueActive == false %}disabled{% endif %}
                                                >
                                              {%- endfor -%}
                                            {%- else -%}
                                              {%- assign valueValueTemp = valueValue -%}
                                              <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                name="{{ valueParamName }}"
                                                value="{{ valueValue }}"
                                                id="Filter-tag-color-{{ valueValue | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                {% if valueActive %}checked{% endif %}
                                                {% if valueCount == 0 and valueActive == false %}disabled{% endif %}
                                              >
                                            {%- endif -%}
                                            <label class="facets__item-label facets__item-label--color" data-tooltip="{{ colorCustomLabel | escape }}" for="Filter-tag-color-{{ valueValueTemp | escape }}-{{ forloopIndex }}{% if colorCustomValue contains ';' %}-1{% endif %}{% if i == 2 %}-no-js{% endif %}" class="ColorSwatch facet-checkbox{% if valueCount == 0 and valueActive == false %} facet-checkbox--disabled{% endif %}">
                                              <span style="{% render 'color-swatch-style', color_swatch_config: color_swatch_config, value: colorCustomLabel %}"></span>
                                              {{ colorCustomLabel }}
                                            </label>
                                          </color-check>
                                        </li>
                                      {%- endcapture -%}
                                      {%- liquid
                                        if i == 1
                                          capture filterColorCustomValues
                                            echo filterColorCustomValues
                                            echo temp
                                          endcapture
                                        else
                                          capture filterColorCustomValuesNoJS
                                            echo filterColorCustomValuesNoJS
                                            echo temp
                                          endcapture
                                        endif
                                      -%}
                                    {%- endfor -%}
                                  {%- endfor -%}
                                  {%- if filterColorCustomValues != '' -%}
                                    {%- assign filterColors = 1 -%}
                                    <ul class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden " role="list">
                                      {{ filterColorCustomValues }}
                                    </ul>
                                    {% comment %} No show more for no JS {% endcomment %}
                                    <ul class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-list no-js-facets" role="list">
                                      {{ filterColorCustomValuesNoJS }}
                                    </ul>
                                  {%- endif -%}
                                {%- endcapture -%}
                                {%- liquid
                                  echo filterColor
                                  if filterColors > 0
                                    assign storefrontFilterColors = storefrontFilterColors | plus: 1
                                  endif
                                -%}
                              {%- endif -%}
                            {%- else -%}
                              {%- if filter.label == 'Color' -%}
                                {%- liquid
                                  assign storefrontFilterColors = 0
                                  assign storefront_filter_color = collectionSettings.storefront_filter_color
                                  assign isBig = false
                                -%}
                                {%- if storefront_filter_color != '' -%}
                                  {% for i in (1..2) -%}
                                    {%- liquid
                                      assign storefront_filter_color = storefront_filter_color | split: ','
                                      assign filterColorCustomValues = ''
                                      assign filterColorCustomValuesNoJS = ''
                                    -%}
                                    {%- capture filterColor -%}
                                      {%- assign forloopIndex = 0 -%}
                                      {%- for colorCustom in storefront_filter_color -%}
                                        {%- liquid
                                          assign filterColors = 0
                                          assign filterColorCustomInputs = ''
                                          assign forloopIndex = forloopIndex | plus: 1
                                          assign colorCustomValue = colorCustom | split: '=' | first
                                          assign colorCustomLabel = colorCustom | split: '=' | last
                                          assign availableCount = 0
                                        -%}
                                        {%- unless colorCustomValue contains ';' -%}
                                          {%- assign colorCustomValueVe = colorCustomValue | downcase -%}
                                          {% assign colorExist = false %}
                                          {%- for value in filter.values -%}
                                            {%- if filter.label == 'Color' and value.value contains colorCustomValueVe -%}
                                              {%- capture filterColorCustomInputs -%}
                                                {{ filterColorCustomInputs }}
                                                <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                  name="{{ value.param_name }}"
                                                  value="{{ value.value }}"
                                                  id="Filter-{{ filter.label | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                  {% if value.active %}checked{% endif %}
                                                  {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                                >
                                              {%- endcapture -%}
                                              {%- liquid
                                                assign colorExist = true
                                                assign filterColors = filterColors | plus: 1
                                                if filterColors == 1
                                                  assign colorCustomLabelValue = value.value
                                                  assign colorCustomLabelActive = value.active
                                                  assign colorCustomLabelCount = value.count
                                                endif
                                                unless value.count == 0 and value.active == false
                                                  assign availableCount = availableCount | plus: 1
                                                endunless
                                              -%}
                                            {%- endif -%}
                                          {%- endfor -%}

                                        {%- else -%}
                                          {% liquid
                                            assign colorCustomValueArray = colorCustomValue | split: ';'
                                            for colorCustomValueV in colorCustomValueArray
                                              assign colorCustomValueVe = colorCustomValueV | downcase
                                              for value in filter.values
                                                if filter.label == 'Color' and value.value contains colorCustomValueVe
                                                  unless value.count == 0 and value.active == false
                                                    assign availableCount = availableCount | plus: 1
                                                  endunless
                                                endif
                                              endfor
                                            endfor
                                          %}
                                          {%- for colorCustomValueV in colorCustomValueArray -%}
                                            {% liquid
                                              assign colorCustomValueVe = colorCustomValueV | downcase
                                              assign colorExist = false
                                              assign filterColors = 0
                                            %}

                                            {%- for value in filter.values -%}
                                              {%- if filter.label == 'Color' and value.value contains colorCustomValueVe -%}
                                                {%- capture filterColorCustomInputs -%}
                                                  {{ filterColorCustomInputs }}
                                                  <input class="facets__item-checkbox facets__item-checkbox--color available= {{ availableCount }}" type="checkbox"
                                                    name="{{ value.param_name }}"
                                                    value="{{ value.value }}"
                                                    id="Filter-{{ filter.label | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                    {% if value.active %}checked{% endif %}
                                                    {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                                  >
                                                {%- endcapture -%}
                                                {%- liquid
                                                  assign colorExist = true
                                                  unless value.count == 0 and value.active == false
                                                    assign filterColors = filterColors | plus: 1
                                                    if filterColors == 1
                                                      assign colorCustomLabelValue = value.value
                                                      assign colorCustomLabelActive = value.active
                                                      assign colorCustomLabelCount = value.count
                                                    endif
                                                  endunless
                                                -%}
                                              {%- endif -%}
                                            {%- endfor -%}

                                          {%- endfor -%}
                                        {%- endunless -%}
                                        {%- if filterColors > 0 -%}
                                          <li class="list-menu__item facets__item facets__item--color">
                                            <color-check data-index="{{ forloopIndex }}">
                                              {{ filterColorCustomInputs }}
                                              <label class="facets__item-label facets__item-label--color ---- ColorSwatch facet-checkbox{% if availableCount == 0 %} facet-checkbox--disabled{% endif %}" data-tooltip="{{ colorCustomLabel | escape }}" for="Filter-{{ filter.label | escape }}-{{ colorCustomLabelValue | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" >
                                                <span style="{% render 'color-swatch-style', color_swatch_config: color_swatch_config, value: colorCustomLabel %}"></span>
                                                {{ colorCustomLabel }}
                                              </label>
                                            </color-check>
                                          </li>
                                        {%- endif -%}
                                      {%- endfor -%}
                                    {%- endcapture -%}

                                    {% if i == 2 %}{% comment %} No show more for no JS {% endcomment %}{% endif %}
                                    <ul
                                      class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled {% if i == 1 %}no-js-hidden{% else %}no-js-list no-js-facets{% endif %}"
                                      role="list"
                                    >
                                      {{ filterColor }}
                                    </ul>
                                  {%- endfor -%}
                                {%- endif -%}
                              {%- else -%}
                                {% for i in (1..2) -%}
                                  {% if i == 2 %}{% comment %} No show more for no JS {% endcomment %}{% endif %}
                                  <ul
                                    class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled {% if i == 1 %}no-js-hidden{% else %}no-js-list no-js-facets{% endif %}"
                                    role="list"
                                  >
                                    {%- for value in filter.values -%}
                                      {%- unless value.count == 0 and value.active == false -%}
                                        <li class="list-menu__item facets__item{% if i == 1 and forloop.index > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}">
                                          <label
                                            for="Filter-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloop.index }}{% if i == 2 %}-no-js{% endif %}"
                                            class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                          >
                                            <input
                                              type="checkbox"
                                              name="{{ value.param_name }}"
                                              value="{{ value.value }}"
                                              id="Filter-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloop.index }}{% if i == 2 %}-no-js{% endif %}"
                                              {% if value.active %}
                                                checked
                                              {% endif %}
                                              {% if value.count == 0 and value.active == false %}
                                                disabled
                                              {% endif %}
                                            >

                                            <svg
                                              width="1.1em"
                                              height="1.1em"
                                              viewBox="0 0 16 16"
                                              aria-hidden="true"
                                              focusable="false"
                                            >
                                              <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                            </svg>

                                            <span aria-hidden="true">
                                              {{- value.label | escape -}}
                                              {% comment %} ({{ value.count }}){% endcomment %}
                                            </span>
                                            <span class="visually-hidden">
                                              {{- value.label | escape -}}
                                              {% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}
                                            </span>
                                          </label>
                                        </li>
                                      {%- endunless -%}
                                    {%- endfor -%}
                                  </ul>
                                {%- endfor %}
                              {%- endif -%}
                            {%- endif -%}
                          {%- endif -%}
                        </fieldset>

                        {%- if filter_type != 'vertical' -%}
                          <div class="facets__header bottom">
                            <span class="facets__selected no-js-hidden">{{ filter.active_values.size }} selected</span>
                            <facet-remove>
                              <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                                CLEAR
                              </a>
                            </facet-remove>
                          </div>
                        {%- endif -%}
                        {%- if filter.values.size > 10 and filter_type == 'vertical' -%}
                          <show-more-button>
                            <button
                              class="button-show-more link underlined-link no-js-hidden"
                              id="Show-More-{{ forloop.index }}-{{ section.id }}"
                              type="button"
                            >
                              <span class="label-show-more label-text"
                                ><span aria-hidden="true">+ </span>Show more</span
                              >
                              <span class="label-show-less label-text hidden"
                                ><span aria-hidden="true">- </span>Show less</span
                              >
                            </button>
                          </show-more-button>
                        {%- endif %}
                      </div>
                    </details>
                  {%- endunless -%}
                {% when 'price_range' %}
                  {% liquid
                    comment
                      assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND' | split: ','
                      assign uses_comma_decimals = false
                      if currencies_using_comma_decimals contains cart.currency.iso_code
                        assign uses_comma_decimals = true
                      endif
                    endcomment
                  %}
                  <details
                    id="Details-{{ forloop.index }}-{{ section.id }}"
                    class="filter_item hidden facets__details-{{ filter.type }} {% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
                    data-index="{{ forloop.index }}"
                    {% if filter_type == 'vertical' and forloop.index == 1 %}
                      open
                    {% endif %}
                  >
                    <summary class="facets__summary facets__summary-{{ filter.type }} caption-large focus-offset">
                      <div>
                        <span>
                          {{- filter.label | escape -}}
                          <span class="facets__selected no-js-hidden count{% if filter.min_value.value == nil and filter.max_value.value == nil %} hidden{% endif %}">
                            (1)</span
                          ></span
                        >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" class="arrow" viewBox="4.82 6.32 8.36 4.91">
                          <path d="M9.0001 11.2328C8.9001 11.2328 8.80335 11.2141 8.70985 11.1766C8.61585 11.1391 8.5376 11.0891 8.4751 11.0266L5.0251 7.57656C4.8876 7.43906 4.81885 7.26406 4.81885 7.05156C4.81885 6.83906 4.8876 6.66406 5.0251 6.52656C5.1626 6.38906 5.3376 6.32031 5.5501 6.32031C5.7626 6.32031 5.9376 6.38906 6.0751 6.52656L9.0001 9.45156L11.9251 6.52656C12.0626 6.38906 12.2376 6.32031 12.4501 6.32031C12.6626 6.32031 12.8376 6.38906 12.9751 6.52656C13.1126 6.66406 13.1813 6.83906 13.1813 7.05156C13.1813 7.26406 13.1126 7.43906 12.9751 7.57656L9.5251 11.0266C9.4501 11.1016 9.36885 11.1546 9.28135 11.1856C9.19385 11.2171 9.1001 11.2328 9.0001 11.2328Z" fill="black"></path>
                        </svg>
                      </div>
                    </summary>
                    <div
                      id="Facet-{{ forloop.index }}-{{ section.id }}"
                      class="{% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                    >
                      <!-- price double range -->

                      {% assign range_max = filter.range_max | divided_by: 100 %}

                      {% assign number = range_max %}
                      {% assign remainder = number | modulo: 25 %}
                      {% if remainder >= 13 %}
                        {% assign rounded_number = number | plus: 25 | minus: remainder %}
                      {% else %}
                        {% assign rounded_number = number | minus: remainder %}
                      {% endif %}

                      <div class="price-field price-ranges desktop {{ range_max | round: 25 }}">
                        <caption></caption>
                        <div class="zp-double-range">
                          <div class="zp-range-track"></div>
                          <input
                            step="25"
                            type="range"
                            name="filter.v.price.gte"
                            id="price-min"
                            min="0"
                            max="{{ rounded_number }}"
                            value="0"
                          >
                          <input
                            data-rangemax="{{ range_max }}"
                            step="25"
                            type="range"
                            name="filter.v.price.lte"
                            id="price-max"
                            min="0"
                            max="{{ rounded_number }}"
                            value="{{ rounded_number | plus: 25  }}"
                          >
                          <div class="values">
                            <div class="number-dollar-overlay">
                              <p>FROM</p>
                              <label class="number-dollar-input centered min-val">
                                <span>$</span>
                                <input class="no-qty price-range-value-1" value="0" type="number">
                              </label>
                            </div>
                            <div class="number-dollar-overlay">
                              <p>TO</p>
                              <label class="number-dollar-input centered max-val">
                                <span>$</span>
                                <input class="no-qty price-range-value-2" value="{{ rounded_number }}" type="number">
                              </label>
                            </div>
                          </div>

                          <span class="range-min-number price-label">$ 0</span>
                          <span class="range-max-number price-label">$ {{ rounded_number }}</span>{{ rounded_number }}
                        </div>
                      </div>

                      <!--
                        <ul class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled hidden" role="list">
                          {%- liquid
                            assign range_max = filter.range_max | times: 1.1 | divided_by: 100 | divided_by: 10 | ceil
                            assign rangemax = filter.range_max | divided_by: 100
                            assign min_value = filter.min_value.value | divided_by: 100
                            assign max_value = filter.max_value.value | divided_by: 100
                            assign forloop_index = 1
                            assign forloop_tens = 1
                          -%}
                          {%- for i in (0..range_max) -%}
                            {%- liquid
                              assign enter = false
                              assign checked = false
                              if forloop.index < 100
                                assign forloop_tens = 1
                              elsif forloop.index < 1000
                                assign forloop_tens = 10
                              elsif forloop.index < 10000
                                assign forloop_tens = 100
                              endif
                              assign priceStep1 = 0 | times: forloop_tens
                              assign priceStep2 = 10 | times: forloop_tens
                              assign priceStep3 = 20 | times: forloop_tens
                              assign priceStep4 = 35 | times: forloop_tens
                              assign priceStep5 = 50 | times: forloop_tens
                              if i == priceStep1
                                assign enter = true
                                assign iplus = 10 | plus: i
                              endif
                              if i == priceStep2
                                assign enter = true
                                assign iplus = 10 | plus: i
                              endif
                              if i == priceStep3
                                assign enter = true
                                assign iplus = 15 | plus: i
                              endif
                              if i == priceStep4
                                assign enter = true
                                assign iplus = 15 | plus: i
                              endif
                              if i == priceStep5
                                assign enter = true
                                assign iplus = range_max | plus: i
                              endif
                              assign ibefore = i | times: 10
                              if i == 0
                                assign ibeforeS = 0 | money
                              else
                                assign ibeforeS = i | times: 10 | times: 100 | money
                              endif
                            -%}
                            {%- if enter == true or iplus >= range_max -%}
                              <li class="list-menu__item facets__item facets__item-price{% if forloop_index > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}">
                                <price-radio class="facets__price">
                                  <label class="facet-checkbox">
                                    {%- liquid
                                      assign iafter = iplus | times: 10
                                      if iplus >= range_max
                                        assign iafter = rangemax
                                      endif
                                      assign checked = false
                                      if ibefore >= min_value and iafter <= max_value
                                        assign checked = true
                                      endif
                                    -%}
                                    <input type="radio"
                                      name="filter.v.price.gte"
                                      value="{{ ibefore }}"
                                      id="Filter-{{ filter.label | escape }}-GTE-{{ forloop_index }}"
                                      class="facets__item-price_input"
                                      {% if checked == true %}checked{% endif %}
                                    >

                                    <input type="radio"
                                      name="filter.v.price.lte"
                                      value="{{ iafter }}"
                                      id="Filter-{{ filter.label | escape }}-LTE-{{ forloop_index }}"
                                      class="facets__item-price_input"
                                      {% if checked == true %}checked{% endif %}
                                    >

                                    <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                      <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                    </svg>

                                    {%- if iplus >= range_max -%}
                                      <span aria-hidden="true">{{ ibeforeS }} +</span>
                                      <span class="visually-hidden">{{ ibeforeS }} +</span>
                                    {%- else -%}
                                      <span aria-hidden="true">{{ ibeforeS }} - {{ iplus | times: 10 | times: 100 | money }}</span>
                                      <span class="visually-hidden">{{ ibeforeS }} - {{ iplus | times: 10 | times: 100 | money }}</span>
                                    {%- endif -%}
                                  </label>
                                </price-radio>
                              </li>
                              {%- liquid
                                if iplus >= range_max
                                  break
                                else
                                  assign forloop_index = forloop_index | plus: 1
                                endif
                              -%}
                            {%- endif -%}
                          {%- endfor -%}
                        </ul>
                      -->
                      {%- if filter_type != 'vertical' -%}
                        <div class="facets__header bottom">
                          <facet-remove>
                            <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link"> CLEAR </a>
                          </facet-remove>
                        </div>
                      {%- endif -%}
                    </div>
                  </details>
              {% endcase %}
            {%- endfor -%}
            <noscript>
              <button type="submit" class="facets__button-no-js button button--secondary">Filter</button>
            </noscript>
            <facet-remove class="filter_item hidden active-facets__button-wrapper facet-remove">
              <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                <span>CLEAR ALL</span>
              </a>
            </facet-remove>
          </div>
          {% comment %} Pills after filtes on filter type horizontal {% endcomment %}
          {%- if filter_type == 'horizontal' -%}
            <div class="active-facets active-facets-desktop">
              {%- for filter in results.filters -%}
                {%- for value in filter.active_values -%}
                  <facet-remove>
                    <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                      <span class="active-facets__button-inner button button--tertiary">
                        {{ filter.label }}: {{ value.label | escape }}
                        <svg
                          aria-hidden="true"
                          focusable="false"
                          role="presentation"
                          width="12"
                          height="13"
                          class="icon icon-close-small"
                          viewBox="0 0 12 13"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M8.48627 9.32917L2.82849 3.67098" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                          <path d="M2.88539 9.38504L8.42932 3.61524" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <span class="visually-hidden">Clear filter</span>
                      </span>
                    </a>
                  </facet-remove>
                {%- endfor -%}
                {% if filter.type == 'price_range' %}
                  {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                    <facet-remove>
                      <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                        <span class="active-facets__button-inner button button--tertiary">
                          {%- if filter.min_value.value -%}
                            {{ filter.min_value.value | money }}
                          {%- else -%}
                            {{ 0 | money }}
                          {%- endif -%}
                          -
                          {%- if filter.max_value.value -%}
                            {{ filter.max_value.value | money }}
                          {%- else -%}
                            {{ filter.range_max | money }}
                          {%- endif -%}
                          <svg
                            aria-hidden="true"
                            focusable="false"
                            role="presentation"
                            width="12"
                            height="13"
                            class="icon icon-close-small"
                            viewBox="0 0 12 13"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path d="M8.48627 9.32917L2.82849 3.67098" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M2.88539 9.38504L8.42932 3.61524" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                          </svg>
                          <span class="visually-hidden">Clear filter</span>
                        </span>
                      </a>
                    </facet-remove>
                  {%- endif -%}
                {% endif %}
              {%- endfor -%}
              <facet-remove class="active-facets__button-wrapper">
                <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                  <span>Clear All</span>
                </a>
              </facet-remove>
            </div>
          {%- endif -%}
        {% endif %}

        {% if results.current_vendor or results.current_type %}
          <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
        {% endif %}

        {%- if filter_type == 'horizontal' -%}
          {% comment %} Sorting and product count are the last elements when filter type is horizontal {% endcomment %}
          {%- if enable_sorting -%}
            <details
              id="Details-sort_by-{{ section.id }}"
              class="sort-parent {% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
              data-index="sort_by"
            >
              <summary class="facets__summary caption-large focus-offset" aria-label="{{ filter.label }}">
                <div class="sort-by">
                  <span>Sort By</span>
                  <svg class="arrow" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="4.82 6.32 8.36 4.91">
                    <path d="M9.0001 11.2328C8.9001 11.2328 8.80335 11.2141 8.70985 11.1766C8.61585 11.1391 8.5376 11.0891 8.4751 11.0266L5.0251 7.57656C4.8876 7.43906 4.81885 7.26406 4.81885 7.05156C4.81885 6.83906 4.8876 6.66406 5.0251 6.52656C5.1626 6.38906 5.3376 6.32031 5.5501 6.32031C5.7626 6.32031 5.9376 6.38906 6.0751 6.52656L9.0001 9.45156L11.9251 6.52656C12.0626 6.38906 12.2376 6.32031 12.4501 6.32031C12.6626 6.32031 12.8376 6.38906 12.9751 6.52656C13.1126 6.66406 13.1813 6.83906 13.1813 7.05156C13.1813 7.26406 13.1126 7.43906 12.9751 7.57656L9.5251 11.0266C9.4501 11.1016 9.36885 11.1546 9.28135 11.1856C9.19385 11.2171 9.1001 11.2328 9.0001 11.2328Z" fill="black"></path>
                  </svg>
                </div>
              </summary>
              <div
                id="Facet-sort_by-{{ section.id }}"
                class="parent-display {% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
              >
                <fieldset class="facets-wrap parent-wrap {% if filter_type == 'vertical' %} facets-wrap-vertical{% endif %}">
                  <legend class="visually-hidden">Sort By</legend>
                  <ul
                    class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden"
                    role="list"
                  >
                    {%- liquid
                      assign sort_by = results.sort_by | default: results.default_sort_by
                      assign sortBysCustom = 'manual,created-descending,price-descending,price-ascending' | split: ','
                      assign sortBysLabelCustom = 'Recommended,New In,Price High to Low,Price Low to High' | split: ','
                    -%}
                    {% for sortByCustom in sortBysCustom %}
                      <li class="list-menu__item facets__item">
                        <input
                          type="radio"
                          name="sort_by"
                          value="{{ sortByCustom }}"
                          id="Filter-sort_by-{{ sortByCustom }}"
                          class="Filter-sort_by"
                          {% if sort_by == sortByCustom %}
                            checked
                          {% endif %}
                        >
                        <label for="Filter-sort_by-{{ sortByCustom }}" class="facet-checkbox facet-radio">
                          <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                            <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                          </svg>
                          <span aria-hidden="true">{{ sortBysLabelCustom[forloop.index0] }}</span>
                          <span class="visually-hidden">{{ sortBysLabelCustom[forloop.index0] }}</span>
                        </label>
                      </li>
                    {% endfor %}
                  </ul>
                </fieldset>
              </div>
            </details>
          {%- endif -%}
          {% if enable_grid_changer %}
            <div class="grid-switcher">
              <div
                id="two-grid-switcher"
                class="grid-switcher-option {% if grid_count == 2 %}active{% endif %}"
                grid_count="2"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="33" height="18" viewBox="0 0 33 18" fill="none">
                          <rect x="0.5" y="0.5" width="15" height="17" fill="white"></rect>
                  <rect x="17.5" y="0.5" width="15" height="17" fill="white"></rect>
                </svg>
              </div>
              <div
                id="three-grid-switcher"
                class="grid-switcher-option {% if grid_count == 3 %}active{% endif %}"
                grid_count="3"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="34" height="18" viewBox="0 0 34 18" fill="none">
                  <rect x="0.5" y="0.5" width="9" height="17" fill="white"></rect>
                  <rect x="12.5" y="0.5" width="9" height="17" fill="white"></rect>
                  <rect x="24.5" y="0.5" width="9" height="17" fill="white"></rect>
                </svg>
              </div>
              <div
                id="four-grid-switcher"
                class="grid-switcher-option {% if grid_count == 4 %}active{% endif %}"
                grid_count="4"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="31" height="18" viewBox="0 0 31 18" fill="none">
                  <rect x="0.5" y="0.5" width="6" height="7" fill="white"></rect>
                  <rect x="0.5" y="10.5" width="6" height="7" fill="white"></rect>
                  <rect x="8.5" y="0.5" width="6" height="7" fill="white"></rect>
                  <rect x="8.5" y="10.5" width="6" height="7" fill="white"></rect>
                  <rect x="16.5" y="0.5" width="6" height="7" fill="white"></rect>
                  <rect x="16.5" y="10.5" width="6" height="7" fill="white"></rect>
                  <rect x="24.5" y="0.5" width="6" height="7" fill="white"></rect>
                  <rect x="24.5" y="10.5" width="6" height="7" fill="white"></rect>
                </svg>
              </div>
              <input type="hidden" name="view_on" id="view_on" value="{{ grid_count }}">
            </div>
          {% else %}
            <input type="hidden" name="view_on" id="view_on" value="{{ grid_count }}">
          {% endif %}
        {%- endif -%}
      </form>
    </facet-filters-form>
    {% comment %} Sorting for vertical filter are grouped with filter when no JS{% endcomment %}
    {%- if enable_sorting and filter_type == 'vertical' -%}
      <facet-filters-form class="small-hide">
        <form class="no-js-facets">
          <div class="facet-filters sorting caption">
            <div class="facet-filters__field">
              <h2 class="facet-filters__label caption-large text-body">
                <label for="SortBy">Sort by:</label>
              </h2>
              <div class="select">
                {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                <select
                  name="sort_by"
                  class="facet-filters__sort select__select caption-large"
                  id="SortBy"
                  aria-describedby="a11y-refresh-page-message"
                >
                  {%- for option in results.sort_options -%}
                    <option
                      value="{{ option.value | escape }}"
                      {% if option.value == sort_by %}
                        selected="selected"
                      {% endif %}
                    >
                      {{ option.name | escape }}
                    </option>
                  {%- endfor -%}
                </select>
                <svg
                  width="16"
                  height="16"
                  class="icon icon-caret"
                  viewBox="0 0 16 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M7.5 11L4 7H11L7.5 11Z" fill="black"/>
                </svg>
              </div>
            </div>

            <noscript>
              <button type="submit" class="facets__button-no-js button button--secondary">Sort</button>
            </noscript>
          </div>

          {% if results.current_vendor or results.current_type %}
            <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
          {% endif %}

          {%- if results.terms -%}
            <input type="hidden" name="q" value="{{ results.terms | escape }}">
            <input name="options[prefix]" type="hidden" value="last">
          {%- endif -%}
        </form>
      </facet-filters-form>
    {%- endif -%}
  {%- endif -%}
  {% comment %}  Drawer and mobile filter {% endcomment %}
  <menu-drawer
    class="mobile-facets__wrapper{% if filter_type == 'horizontal' or filter_type == 'vertical' %} medium-hide large-up-hide{% endif %}"
    data-breakpoint="mobile"
  >
    <details class="mobile-facets__disclosure disclosure-has-popup">
      <summary class="mobile-facets__open-wrapper focus-offset">
        <span class="mobile-facets__open{% if filter_type == 'drawer' and enable_filtering == false %} medium-hide large-up-hide{% endif %}">
          <svg
            width="17"
            height="17"
            viewBox="0 0 17 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon icon-filter"
          >
            <path d="M7.92316 16.4688H6.375V8.42788L0.796875 1.78726V0.53125H15.9375V1.78009L10.625 8.42071V13.7669L7.92316 16.4688ZM7.4375 15.4062H7.48309L9.5625 13.3268V8.04804L14.7259 1.59375H2.02207L7.4375 8.04087V15.4062Z" fill="black"/>
          </svg>
          <span class="mobile-facets__open-label button-label medium-hide large-up-hide">
            {%- comment -%}
              {%- if enable_filtering and enable_sorting -%}
                Filter and sort
              {%- elsif enable_filtering -%}
                Filter
              {%- elsif enable_sorting -%}
                Sort
              {%- endif -%}
            {%- endcomment -%}
            {%- if enable_filtering -%}
              Filter
            {%- endif -%}
          </span>
          <span class="mobile-facets__open-label button-label small-hide">
            {%- if enable_filtering -%}
              Filter
            {%- endif -%}
          </span>
        </span>
        <span tabindex="0" class="mobile-facets__close mobile-facets__close--no-js">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="black"/>
          </svg>
        </span>
      </summary>
      <facet-filters-form>
        <form id="FacetFiltersFormMobile" class="mobile-facets">
          <div class="mobile-facets__inner gradient">
            <div class="mobile-facets__header">
              <div class="mobile-facets__header-inner">
                <svg
                  width="17"
                  height="17"
                  viewBox="0 0 17 17"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  class="icon icon-filter"
                >
                  <path d="M7.92316 16.4688H6.375V8.42788L0.796875 1.78726V0.53125H15.9375V1.78009L10.625 8.42071V13.7669L7.92316 16.4688ZM7.4375 15.4062H7.48309L9.5625 13.3268V8.04804L14.7259 1.59375H2.02207L7.4375 8.04087V15.4062Z" fill="black"/>
                </svg>
                <h2 class="mobile-facets__heading medium-hide large-up-hide">
                  {%- if enable_filtering -%}
                    Filter
                  {%- endif -%}
                </h2>
                <h2 class="mobile-facets__heading small-hide">
                  {%- if enable_filtering -%}
                    Filter
                  {%- endif -%}
                </h2>
                <span tabindex="0" class="mobile-facets__close mobile-facets__close--no-js">
                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="black"/>
                  </svg>
                </span>
              </div>
            </div>
            <div class="mobile-facets__main has-submenu gradient">
              {%- if enable_filtering -%}
                {% if has_category_filter == true %}
                  <details
                    id="Details-Mobile-{{ filterLabel | handleize }}-{{ section.id }}"
                    class="mobile-facets__details mobile-facets__details-{{ resultFilter.type }} mobile-facets__details-tags mobile-facets__details-category mobile-facets__details-{{ filterLabel | handleize }} js-filter{{ filterClass }}"
                    data-index="mobile-{{ filterLabel | handleize }}"
                    data-label="{{ filterLabel }}"
                  >
                    <summary
                      class="mobile-facets__summary focus-inset"
                      aria-label="{{ filterLabel }} ({{ resultFilter.active_values.size }} selected)"
                    >
                      <div>
                        <span>
                          {{- filterLabel -}}
                          <span class="facets__selected no-js-hidden count {% if resultFilter.active_values.size == 0 %} hidden{% endif %}">
                            ({{ resultFilter.active_values.size }})</span
                          ></span
                        >
                        <svg
                          width="16"
                          height="16"
                          class="icon icon-caret"
                          viewBox="0 0 16 16"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M7.5 11L4 7H11L7.5 11Z" fill="black"/>
                        </svg>
                      </div>
                    </summary>
                    <div
                      id="FacetMobile-{{ filterLabel | handleize }}-{{ section.id }}"
                      class="mobile-facets__submenu gradient"
                    >
                      <div class="mobile-facets__container">
                        {%- liquid
                          assign filterTagCustomValues = ''
                          assign forloopIndex = 0
                        -%}
                        {%- for customTag in customTags -%}
                          {%- liquid
                            assign forloopIndex = forloopIndex | plus: 1
                            assign valueParamName = 'filter.p.tag'
                            assign valueValue = customTag
                            assign valueActive = false
                            assign valueCount = 1

                            comment
                              assign filterValue = resultFilter.values | where: 'value', customTag | first
                              if filterValue != nil
                                assign valueParamName = filterValue.param_name
                                assign valueValue = filterValue.value
                                assign valueActive = filterValue.active
                                assign valueCount = filterValue.count
                              endif
                            endcomment
                          -%}
                          {%- capture temp -%}
                            <li class="mobile-facets__item list-menu__item">
                              <label for="Filter-tag-category-mobile-{{ valueValue | handleize }}-{{ forloopIndex }}" class="mobile-facets__label{% if valueCount == 0 and valueActive == false %} mobile-facets__label--disabled{% endif %}" data-index="{{ forloopIndex }}">
                                <input class="mobile-facets__checkbox" type="checkbox"
                                  name="{{ valueParamName }}"
                                  value="{{ valueValue }}"
                                  id="Filter-tag-category-mobile-{{ valueValue | handleize }}-{{ forloopIndex }}"
                                  {% if valueActive %}checked{% endif %}
                                  {% if valueCount == 0 and valueActive == false %}disabled{% endif %}
                                >

                                <svg width="1em" height="1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                  <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                </svg>

                                <span aria-hidden="true">{{ customTag }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                <span class="visually-hidden">{{ customTag }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                              </label>
                            </li>
                          {%- endcapture -%}
                          {%- liquid
                            capture filterTagCustomValues
                              echo filterTagCustomValues
                              echo temp
                            endcapture
                          -%}
                        {%- endfor -%}
                        {%- if filterTagCustomValues != '' -%}
                          <ul class="mobile-facets__list list-unstyled" role="list">
                            {{ filterTagCustomValues }}
                          </ul>
                        {%- endif -%}
                      </div>

                      <div class="no-js-hidden mobile-facets__footer gradient mobile--filter-btns">
                        <a
                          type="button"
                          class=" hidden no-js-hidden underlined-link"
                          onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                          >Apply</a
                        >
                        <noscript><button class="button button--primary ">Apply</button></noscript>
                        <facet-remove class="mobile-facets__clear-wrapper">
                          {% assign resultFilter = results.filters | where: 'label', 'More filters' | first %}

                          <a href="{{ resultFilter.url_to_remove }}" class="mobile-facets__clear underlined-link"
                            >Clear</a
                          >
                        </facet-remove>
                      </div>
                    </div>
                  </details>
                {% endif %}

                {%- for filter in results.filters -%}
                  {% case filter.type %}
                    {% when 'boolean', 'list' %}
                      {%- unless filter.label == 'Product type' or filter.label == 'More filters' -%}
                        <details
                          id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
                          class="mobile-facets__details mobile-facets__details-{{ filter.type }} {% if filter.label == 'More filters' %}mobile-facets__details-tags{% endif %} mobile-facets__details-{%- if filter.label == 'More filters' -%}color{% else %}{{ filter.label | handleize }}{% endif %} js-filter"
                          data-index="mobile-{{ forloop.index }}"
                          data-label="{%- if filter.label == 'More filters' -%}Color{% else %}{{ filter.label }}{% endif %}"
                        >
                          <summary
                            class="mobile-facets__summary focus-inset"
                            aria-label="{%- if filter.label == 'More filters' -%}Color{% else %}{{ filter.label }}{% endif %} ({{ filter.active_values.size }} selected)"
                          >
                            <div>
                              {% if filter.label == 'Color' or filter.label == 'More filters' %}
                                {% assign valuesCountNoIvory = 0 %}
                                {% for value in filter.values %}
                                  {% if value.active and value.label != 'ivory' %}
                                    {% assign valuesCountNoIvory = valuesCountNoIvory | plus: 1 %}
                                  {% endif %}
                                {% endfor %}
                              {% endif %}
                              <span>
                                {%- if filter.label == 'More filters' -%}
                                  Color
                                {%- else -%}
                                  {{- filter.label | escape -}}
                                {%- endif -%}
                                <span class="facets__selected no-js-hidden count{% if filter.active_values.size == 0 %} hidden{% endif %} {%- if filter.label == 'Size' -%} sizes-count {%- endif -%}">
                                  {% if filter.label != 'Size' %} ({{ valuesCountNoIvory }}){% endif %}
                                </span></span
                              >
                              <svg
                                width="16"
                                height="16"
                                class="icon icon-caret"
                                viewBox="0 0 16 16"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                              >
                                <path d="M7.5 11L4 7H11L7.5 11Z" fill="black"/>
                              </svg>
                            </div>
                          </summary>
                          <div
                            id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
                            class="mobile-facets__submenu gradient"
                          >
                            <div class="mobile-facets__container">
                              {%- if filter.label == 'Size'
                                and collectionSettings.storefront_filter_size_bra != ''
                                and collectionSettings.storefront_filter_size_panties != ''
                                and collectionSettings.storefront_filter_size_clothing != ''
                              -%}
                                {%- liquid
                                  assign filterValues = filter.values | sort: 'value'
                                  assign storefrontFilterSizes = 0
                                -%}
                                {% assign filterSizeCustomValues = '' %}
                                {%- capture storefrontFilterSize -%}
                                  {%- liquid
                                    assign filterSizesCustom = "Clothing,Panties and Garters,Bras" | split: ','
                                  -%}

                                  {%- for filterSizeCustom in filterSizesCustom -%}
                                    {%- liquid
                                      assign storefront_filter_size = ''
                                      assign storefront_filter_size_type = ''
                                      case filterSizeCustom
                                        when 'Bras'
                                          assign storefront_filter_size = collectionSettings.storefront_filter_size_bra
                                        when 'Panties and Garters'
                                          assign storefront_filter_size = collectionSettings.storefront_filter_size_panties
                                        when 'Clothing'
                                          assign storefront_filter_size = collectionSettings.storefront_filter_size_clothing
                                      endcase
                                      assign storefront_filter_size_type = storefront_filter_size_type | split: ','

                                      assign foundSizeType =  false
                                      assign valueDisabled = true

                                    -%}
                                    {%- if storefront_filter_size != '' -%}
                                      {%- liquid
                                        assign storefront_filter_size = storefront_filter_size | split: ','

                                        assign filterSizes = 0
                                        assign selectedCount = 0
                                      -%}

                                        <!-- mobile filter size -->

                                          {%- assign forloopIndex = 0 -%}
                                          {%- for sizeCustom in storefront_filter_size -%}
                                            {%- unless sizeCustom contains '=' -%}
                                              {%- liquid
                                                assign forloopIndex = forloopIndex | plus: 1
                                              -%}
                                              {% assign sizeCustomDownCase = sizeCustom | downcase %}

                                              {%- for value in filterValues -%}
                                                {% if value.active == true %}
                                                  {% assign selectedCount = selectedCount | plus: 1  %}
                                                {% endif %}
                                                {%- assign valueDownCase = value.value | downcase -%}
                                                {%- if sizeCustom == value.value -%}
                                                  {%- assign forloopIndex = forloopIndex | plus: 1 -%}
                                                  {%- for i in (1..2) -%}
                                                    {%- capture temp -%}
                                                      <li
                                                      class="mobile-facets__item list-menu__item facets__item{% if value.count == 0 and value.active == false %} list-menu__item--disabled{% endif %}{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %} {% if value.active == true %} active {% endif  %}">
                                                        <size-check data-index="{{ forloopIndex }}">

                                                          <label for="Filter-mobile-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                                            <input type="checkbox"
                                                              name="{{ value.param_name }}"
                                                              value="{{ value.value }}"
                                                              data-size-label="{{ value.label | escape }}"
                                                              id="Filter-mobile-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                              {% if value.active %}checked{% endif %}
                                                              {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                                            >
                                                            <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                                              <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                                            </svg>

                                                            <span aria-hidden="true">{{ value.label | escape }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                                            <span class="visually-hidden">{{ value.label | escape }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                                                          </label>
                                                        </size-check>
                                                      </li>
                                                    {%- endcapture -%}
                                                    {%- liquid
                                                      if i == 1
                                                        capture filterSizeCustomValues
                                                          echo filterSizeCustomValues
                                                          echo temp
                                                        endcapture
                                                      else
                                                        capture filterSizeCustomValuesNoJS
                                                          echo filterSizeCustomValuesNoJS
                                                          echo temp
                                                        endcapture
                                                      endif
                                                    -%}
                                                  {%- endfor -%}
                                                {%- endif -%}
                                              {%- endfor -%}
                                            {%- else -%}

                                              {%- liquid
                                                assign sizeCustomValue = sizeCustom | split: '=' | first
                                                assign sizeCustomDownCase = sizeCustomValue | downcase
                                                assign sizeCustomLabel = sizeCustom | split: '=' | last
                                              -%}
                                              {%- unless sizeCustomValue contains ';' -%}
                                                {%- for value in filterValues -%}
                                                  {% if value.active == true %}
                                                    {% assign selectedCount = selectedCount | plus: 1  %}
                                                  {% endif %}
                                                  {%- assign valueDownCase = value.value | downcase -%}
                                                  {%- if sizeCustomValue == value.value  -%}
                                                    {%- assign forloopIndex = forloopIndex | plus: 1 -%}
                                                    {%- for i in (1..2) -%}
                                                      {%- capture temp -%}
                                                        <li
                                                          class="mobile-facets__item list-menu__item facets__item{% if valueDisabled == true or value.count == 0 and value.active == false %} list-menu__item--disabled{% endif %}{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %} {% if value.active == true %} active {% endif  %} ">
                                                          <size-check data-index="{{ forloopIndex }}">

                                                            <label for="Filter-mobile-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if valueDisabled == true or value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                                              <input type="checkbox"
                                                                name="{{ value.param_name }}"
                                                                value="{{ value.value }}"
                                                                data-size-label="{{ sizeCustomLabel | escape }}"
                                                                id="Filter-mobile-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                                {% if value.active %}checked{% endif %}
                                                                {% if valueDisabled == true or value.count == 0 and value.active == false %}disabled{% endif %}
                                                              >
                                                              <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                                                <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                                              </svg>

                                                              <span aria-hidden="true">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                                              <span class="visually-hidden">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                                                            </label>
                                                          </size-check>
                                                        </li>
                                                      {%- endcapture -%}
                                                      {%- liquid
                                                        if i == 1
                                                          capture filterSizeCustomValues
                                                            echo filterSizeCustomValues
                                                            echo temp
                                                          endcapture
                                                        else
                                                          capture filterSizeCustomValuesNoJS
                                                            echo filterSizeCustomValuesNoJS
                                                            echo temp
                                                          endcapture
                                                        endif
                                                      -%}
                                                    {%- endfor -%}
                                                  {%- endif -%}
                                                {%- endfor -%}

                                              {%- else -%}
                                                {%- liquid
                                                  assign sizeCustomValueArray = sizeCustomValue | split: ';'
                                                  assign valueDisabled = true
                                                  assign selectedCount = 0
                                                  assign sizeExist = false
                                                -%}
                                                {%- for sizeCustomValueA in sizeCustomValueArray -%}
                                                  {%- for value in filterValues -%}
                                                    {%- assign valueDownCase = value.value | downcase -%}
                                                    {%- assign sizeCustomValueADowncase = sizeCustomValueA | downcase -%}
                                                    {%- if sizeCustomValueA == value.value -%}
                                                      {% assign sizeExist = true %}
                                                      {% unless value.count == 0 and value.active == false %}
                                                        {% assign valueFor = value.value %}
                                                        {% assign valueDisabled = false %}
                                                      {% endunless %}
                                                      {% if value.active == true %}
                                                        {% assign selectedCount = selectedCount | plus: 1  %}
                                                      {% endif %}
                                                      {% break %}
                                                    {%- endif -%}
                                                  {%- endfor -%}
                                                {%- endfor -%}
                                                {%- if sizeExist -%}
                                                  {%- assign forloopIndex = forloopIndex | plus: 1 -%}
                                                  {%- for i in (1..2) -%}
                                                    {%- capture temp -%}
                                                      <li
                                                        class="mobile-facets__item list-menu__item facets__item{% if valueDisabled == true or value.count == 0 and value.active == false %} list-menu__item--disabled{% endif %}{% if i == 1 and forloopIndex > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}  {% if selectedCount != 0 %} active {% endif  %}">
                                                        <size-check data-index="{{ forloopIndex }}">
                                                          <label for="Filter-mobile-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ valueFor | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}" class="facet-checkbox{% if valueDisabled == true or value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                                            {%- for sizeCustomValueA in sizeCustomValueArray -%}
                                                              {%- for value in filterValues -%}
                                                                {%- assign valueDownCase = value.value | downcase -%}
                                                                {%- if sizeCustomValueA == value.value -%}
                                                                  <input type="checkbox"
                                                                    name="{{ value.param_name }}"
                                                                    value="{{ value.value }}"

                                                                    data-size-label="{{ sizeCustomLabel | escape }}"
                                                                    id="Filter-mobile-{{ filterSizeCustom | handleize }}-{{ filter.param_name | escape }}-{{ value.value | handleize }}-{{ forloopIndex }}{% if i == 2 %}-no-js{% endif %}"
                                                                    {% if value.active %}checked{% endif %}
                                                                    {% if valueDisabled == true or value.count == 0 and value.active == false %}disabled{% endif %}
                                                                  >
                                                                  {% break %}
                                                                {%- endif -%}
                                                              {%- endfor -%}

                                                            {%- endfor -%}

                                                            <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                                              <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                                            </svg>

                                                            <span aria-hidden="true">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }}){% endcomment %}</span>
                                                            <span class="visually-hidden">{{ sizeCustomLabel | escape }}{% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}</span>
                                                          </label>
                                                        </size-check>
                                                      </li>
                                                    {%- endcapture -%}
                                                    {%- liquid
                                                      if i == 1
                                                        capture filterSizeCustomValues
                                                          echo filterSizeCustomValues
                                                          echo temp
                                                        endcapture
                                                      else

                                                        capture filterSizeCustomValuesNoJS
                                                          echo filterSizeCustomValuesNoJS
                                                          echo temp
                                                        endcapture
                                                      endif
                                                    -%}
                                                  {%- endfor -%}
                                                {%- endif -%}
                                              {%- endunless -%}
                                            {%- endunless -%}
                                          {%- endfor -%}
                                    {%- endif -%}
                                  {%- endfor -%}


                                  {%- if filterSizeCustomValues != '' -%}
                                            {%- assign filterSizes = filterSizeCustomValues | size -%}
                                            <ul class="mobile-facets__list list-unstyled" role="list">
                                              {{ filterSizeCustomValues }}
                                            </ul>
                                          {%- endif -%}

                                {%- endcapture -%}
                                <div class="facets-wrap-container facets-wrap-container-{{ storefrontFilterSizes }}">
                                  {{ storefrontFilterSize }}
                                </div>
                              {%- else -%}
                                {%- assign color_swatch_config = settings.color_swatch_config
                                  | newline_to_br
                                  | split: '<br />'
                                -%}
                                {%- if filter.label == 'More filters' -%}
                                  {%- liquid
                                    assign storefrontFilterColors = 0
                                    assign storefront_filter_color = collectionSettings.storefront_filter_color
                                    assign storefront_filter_color_custom = ''
                                  -%}
                                  {%- if storefront_filter_color != '' -%}
                                    {%- liquid
                                      assign storefront_filter_color = storefront_filter_color | split: ','
                                      assign filterColorCustomValues = ''
                                      assign filterColorCustomValuesNoJS = ''
                                      assign filterColors = 0
                                    -%}
                                    {%- capture filterColor -%}
                                      {%- assign forloopIndex = 0 -%}
                                      {%- for colorCustom in storefront_filter_color -%}
                                        {%- liquid
                                          assign forloopIndex = forloopIndex | plus: 1
                                          assign colorCustomValue = colorCustom | split: '=' | first
                                          assign colorCustomLabel = colorCustom | split: '=' | last

                                          assign valueParamName = 'filter.p.tag'
                                          assign valueValue = colorCustomValue
                                          assign valueActive = false
                                          assign valueCount = 1
                                        -%}
                                        {%- capture filterColorCustomValues -%}
                                          {{ filterColorCustomValues }}
                                          <li class="mobile-facets__item list-menu__item mobile-facets__item--color">
                                            <color-check data-index="{{ forloopIndex }}">
                                              {%- if colorCustomValue contains ';' -%}
                                                {%- liquid
                                                  assign colorCustomValueArray = colorCustomValue | split: ';'
                                                  assign valueValueTemp = colorCustomValueArray.first
                                                -%}
                                                {%- for colorCustomValueA in colorCustomValueArray -%}
                                                  <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                    name="{{ valueParamName }}"
                                                    value="{{ colorCustomValueA }}"
                                                    id="Filter-tag-color-mobile-{{ colorCustomValueA | handleize }}-{{ forloopIndex }}-{{ forloop.index }}"
                                                    {% if valueActive %}checked{% endif %}
                                                    {% if valueCount == 0 and valueActive == false %}disabled{% endif %}
                                                  >
                                                {%- endfor -%}
                                              {%- else -%}
                                              {%- assign valueValueTemp = valueValue -%}
                                                <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                  name="{{ valueParamName }}"
                                                  value="{{ valueValue }}"
                                                  id="Filter-tag-color-mobile-{{ valueValue | handleize }}-{{ forloopIndex }}"
                                                  {% if valueActive %}checked{% endif %}
                                                  {% if valueCount == 0 and valueActive == false %}disabled{% endif %}
                                                >
                                              {%- endif -%}
                                              <label class="mobile-facets__item-label facets__item-label--color ColorSwatch facet-checkbox{% if valueCount == 0 and valueActive == false %} facet-checkbox--disabled{% endif %}" data-tooltip="{{ colorCustomLabel | escape }}" for="Filter-tag-color-mobile-{{ valueValueTemp | handleize }}-{{ forloopIndex }}{% if colorCustomValue contains ';' %}-1{% endif %}">
                                                <span  style="{% render 'color-swatch-style', color_swatch_config: color_swatch_config, value: colorCustomLabel %}"></span>
                                                {{ colorCustomLabel }}
                                              </label>
                                            </color-check>
                                          </li>
                                        {%- endcapture -%}
                                      {%- endfor -%}
                                      {%- if filterColorCustomValues != '' -%}
                                        {%- assign filterColors = 1 -%}
                                        <ul class="mobile-facets__list list-unstyled" role="list">
                                          {{ filterColorCustomValues }}
                                        </ul>
                                      {%- endif -%}
                                    {%- endcapture -%}
                                    {%- liquid
                                      echo filterColor
                                      if filterColors > 0
                                        assign storefrontFilterColors = storefrontFilterColors | plus: 1
                                      endif
                                    -%}
                                  {%- endif -%}
                                {%- else -%}
                                  {%- if filter.label == 'Color' -%}
                                    {%- liquid
                                      assign storefrontFilterColors = 0
                                      assign storefront_filter_color = collectionSettings.storefront_filter_color
                                    -%}
                                    {%- if storefront_filter_color != '' -%}
                                      {%- liquid
                                        assign storefront_filter_color = storefront_filter_color | split: ','
                                        assign filterColorCustomValues = ''
                                        assign filterColorCustomValuesNoJS = ''
                                      -%}
                                      {%- capture filterColor -%}
                                        {%- assign forloopIndex = 0 -%}
                                        {%- for colorCustom in storefront_filter_color -%}
                                          {%- liquid
                                            assign filterColors = 0
                                            assign filterColorCustomInputs = ''
                                            assign forloopIndex = forloopIndex | plus: 1
                                            assign colorCustomValue = colorCustom | split: '=' | first
                                            assign colorCustomLabel = colorCustom | split: '=' | last
                                            assign availableCount = 0
                                          -%}
                                          {%- unless colorCustomValue contains ';' -%}
                                            {%- assign colorCustomValueVe = colorCustomValue | downcase -%}
                                            {%- for value in filter.values -%}
                                              {%- if filter.label == 'Color' and value.value contains colorCustomValueVe -%}
                                                {%- capture filterColorCustomInputs -%}
                                                  {{ filterColorCustomInputs }}
                                                  <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                    name="{{ value.param_name }}"
                                                    value="{{ value.value }}"
                                                    id="Filter-{{ filter.label | escape }}-mobile-{{ value.value | handleize }}-{{ forloopIndex }}"
                                                    {% if value.active %}checked{% endif %}
                                                    {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                                  >
                                                {%- endcapture -%}
                                                {%- liquid
                                                  assign filterColors = filterColors | plus: 1
                                                  if filterColors == 1
                                                    assign colorCustomLabelValue = value.value
                                                    assign colorCustomLabelActive = value.active
                                                    assign colorCustomLabelCount = value.count
                                                  endif
                                                  unless value.count == 0 and value.active == false
                                                    assign availableCount = availableCount | plus: 1
                                                  endunless
                                                -%}
                                              {%- endif -%}
                                            {%- endfor -%}
                                          {%- else -%}
                                            {% liquid
                                              assign colorCustomValueArray = colorCustomValue | split: ';'
                                              for colorCustomValueV in colorCustomValueArray
                                                assign colorCustomValueVe = colorCustomValueV | downcase
                                                for value in filter.values
                                                  if filter.label == 'Color' and value.value contains colorCustomValueVe
                                                    unless value.count == 0 and value.active == false
                                                      assign availableCount = availableCount | plus: 1
                                                    endunless
                                                  endif
                                                endfor
                                              endfor
                                            %}
                                            {%- for colorCustomValueV in colorCustomValueArray -%}
                                              {%- assign colorCustomValueVe = colorCustomValueV | downcase -%}
                                              {%- for value in filter.values -%}
                                                  {%- if filter.label == 'Color' and value.value contains colorCustomValueVe -%}
                                                    {%- capture filterColorCustomInputs -%}
                                                      {{ filterColorCustomInputs }}
                                                      <input class="facets__item-checkbox facets__item-checkbox--color" type="checkbox"
                                                        name="{{ value.param_name }}"
                                                        value="{{ value.value }}"
                                                        id="Filter-{{ filter.label | escape }}-mobile-{{ value.value | handleize }}-{{ forloopIndex }}"
                                                        {% if value.active %}checked{% endif %}
                                                        {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                                      >
                                                    {%- endcapture -%}
                                                    {%- liquid
                                                      unless value.count == 0 and value.active == false
                                                        assign filterColors = filterColors | plus: 1
                                                        if filterColors == 1
                                                          assign colorCustomLabelValue = value.value
                                                          assign colorCustomLabelActive = value.active
                                                          assign colorCustomLabelCount = value.count
                                                        endif
                                                      endunless
                                                    -%}
                                                  {%- endif -%}
                                              {%- endfor -%}
                                            {%- endfor -%}
                                          {%- endunless -%}
                                          {%- if filterColors > 0 -%}
                                            <li class="mobile-facets__item list-menu__item mobile-facets__item--color">
                                              <color-check data-index="{{ forloopIndex }}">
                                                {{ filterColorCustomInputs }}
                                                <label class="mobile-facets__item-label facets__item-label--color ----{% if availableCount == 0 %} facet-checkbox--disabled{% endif %}" data-tooltip="{{ colorCustomLabel | escape }}" for="Filter-{{ filter.label | escape }}-mobile-{{ colorCustomLabelValue | handleize }}-{{ forloopIndex }}">
                                                  <span style="{% render 'color-swatch-style', color_swatch_config: color_swatch_config, value: colorCustomLabel %}"></span>
                                                  {{ colorCustomLabel }}
                                                </label>
                                              </color-check>
                                            </li>
                                          {%- endif -%}
                                        {%- endfor -%}
                                      {%- endcapture -%}

                                      <ul class="mobile-facets__list list-unstyled" role="list">
                                        {{ filterColor }}
                                      </ul>
                                    {%- endif -%}
                                  {%- else -%}
                                    <ul class="mobile-facets__list list-unstyled" role="list">
                                      {%- for value in filter.values -%}
                                        {%- unless value.count == 0 and value.active == false -%}
                                          <li class="mobile-facets__item list-menu__item">
                                            <label
                                              for="Filter-{{ filter.param_name | escape }}-mobile-{{ value.value | handleize }}-{{ forloop.index }}"
                                              class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}"
                                            >
                                              <input
                                                class="mobile-facets__checkbox"
                                                type="checkbox"
                                                name="{{ value.param_name }}"
                                                value="{{ value.value }}"
                                                id="Filter-{{ filter.param_name | escape }}-mobile-{{ value.value | handleize }}-{{ forloop.index }}"
                                                {% if value.active %}
                                                  checked
                                                {% endif %}
                                                {% if value.count == 0 and value.active == false %}
                                                  disabled
                                                {% endif %}
                                              >

                                              <svg
                                                width="1em"
                                                height="1em"
                                                viewBox="0 0 16 16"
                                                aria-hidden="true"
                                                focusable="false"
                                              >
                                                <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                              </svg>

                                              <span aria-hidden="true">
                                                {{- value.label | escape -}}
                                                {% comment %} ({{ value.count }}){% endcomment %}
                                              </span>
                                              <span class="visually-hidden">
                                                {{- value.label | escape -}}
                                                {% comment %} ({{ value.count }} product{% if value.count > 1 %}s{% endif %}){% endcomment %}
                                              </span>
                                            </label>
                                          </li>
                                          {% comment %}{- endif -}{% endcomment %}
                                        {%- endunless -%}
                                      {%- endfor -%}
                                    </ul>
                                  {%- endif -%}
                                {%- endif -%}
                              {%- endif -%}
                            </div>

                            <div class="no-js-hidden mobile-facets__footer gradient mobile--filter-btns">
                              <a
                                type="button"
                                class=" hidden no-js-hidden underlined-link"
                                onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                                >Apply</a
                              >
                              <noscript><button class="button button--primary">Select</button></noscript>
                              <facet-remove class="mobile-facets__clear-wrapper">
                                <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link"
                                  >Clear
                                </a>
                              </facet-remove>
                            </div>
                          </div>
                        </details>
                      {%- endunless -%}
                    {% when 'price_range' %}
                      <details
                        id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
                        class="mobile-facets__details mobile-facets__details-{{ filter.type }} js-filter"
                        data-index="mobile-{{ forloop.index }}"
                      >
                        <summary class="mobile-facets__summary facets__summary-{{ filter.type }} focus-inset">
                          <div>
                            <span>
                              {{- filter.label | escape -}}
                              <span class="facets__selected no-js-hidden count {% if filter.min_value.value == nil and filter.max_value.value == nil %} hidden{% endif %}">
                                (1)</span
                              ></span
                            >
                            <svg
                              width="16"
                              height="16"
                              class="icon icon-caret"
                              viewBox="0 0 16 16"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path d="M7.5 11L4 7H11L7.5 11Z" fill="black"/>
                            </svg>
                          </div>
                        </summary>
                        <div
                          id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
                          class="mobile-facets__submenu gradient "
                        >
                          <!--
                            <ul class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled" role="list">
                              {%- liquid
                                assign range_max = filter.range_max | times: 1.1 | divided_by: 100 | divided_by: 10 | ceil
                                assign rangemax = filter.range_max | divided_by: 100
                                assign min_value = filter.min_value.value | divided_by: 100
                                assign max_value = filter.max_value.value | divided_by: 100
                                assign forloop_index = 1
                                assign forloop_tens = 1
                              -%}
                              {%- for i in (0..range_max) -%}
                                {%- liquid
                                  assign enter = false
                                  assign checked = false
                                  if forloop.index < 100
                                    assign forloop_tens = 1
                                  elsif forloop.index < 1000
                                    assign forloop_tens = 10
                                  elsif forloop.index < 10000
                                    assign forloop_tens = 100
                                  endif
                                  assign priceStep1 = 0 | times: forloop_tens
                                  assign priceStep2 = 10 | times: forloop_tens
                                  assign priceStep3 = 20 | times: forloop_tens
                                  assign priceStep4 = 35 | times: forloop_tens
                                  assign priceStep5 = 50 | times: forloop_tens
                                  if i == priceStep1
                                    assign enter = true
                                    assign iplus = 10 | plus: i
                                  endif
                                  if i == priceStep2
                                    assign enter = true
                                    assign iplus = 10 | plus: i
                                  endif
                                  if i == priceStep3
                                    assign enter = true
                                    assign iplus = 15 | plus: i
                                  endif
                                  if i == priceStep4
                                    assign enter = true
                                    assign iplus = 15 | plus: i
                                  endif
                                  if i == priceStep5
                                    assign enter = true
                                    assign iplus = range_max | plus: i
                                  endif
                                  assign ibefore = i | times: 10
                                  if i == 0
                                    assign ibeforeS = 0 | money
                                  else
                                    assign ibeforeS = i | times: 10 | times: 100 | money
                                  endif
                                -%}
                                {%- if enter == true or iplus >= range_max -%}
                                  <li class="list-menu__item facets__item facets__item-price{% if forloop_index > 10 and filter_type == 'vertical' %} show-more-item hidden{% endif %}">
                                    <price-radio class="facets__price">
                                      <label class="facet-checkbox">
                                        {%- liquid
                                          assign iafter = iplus | times: 10
                                          if iplus >= range_max
                                            assign iafter = rangemax
                                          endif
                                          assign checked = false
                                          if ibefore >= min_value and iafter <= max_value
                                            assign checked = true
                                          endif
                                        -%}
                                        <input type="radio"
                                          name="filter.v.price.gte"
                                          value="{{ ibefore }}"
                                          id="Filter-{{ filter.label | escape }}-GTE-{{ forloop_index }}"
                                          class="facets__item-price_input"
                                          {% if checked == true %}checked{% endif %}
                                        >

                                        <input type="radio"
                                          name="filter.v.price.lte"
                                          value="{{ iafter }}"
                                          id="Filter-{{ filter.label | escape }}-LTE-{{ forloop_index }}"
                                          class="facets__item-price_input"
                                          {% if checked == true %}checked{% endif %}
                                        >

                                        <svg width="1.4em" height="1.4em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                                          <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                                        </svg>

                                        {%- if iplus >= range_max -%}
                                          <span aria-hidden="true">{{ ibeforeS }} +</span>
                                          <span class="visually-hidden">{{ ibeforeS }} +</span>
                                        {%- else -%}
                                          <span aria-hidden="true">{{ ibeforeS }} - {{ iplus | times: 10 | times: 100 | money }}</span>
                                          <span class="visually-hidden">{{ ibeforeS }} - {{ iplus | times: 10 | times: 100 | money }}</span>
                                        {%- endif -%}
                                      </label>
                                    </price-radio>
                                  </li>
                                  {%- liquid
                                    if iplus >= range_max
                                      break
                                    else
                                      assign forloop_index = forloop_index | plus: 1
                                    endif
                                  -%}
                                {%- endif -%}
                              {%- endfor -%}
                            </ul>
                          -->
                          <!--
                            <div>
                              <label>Price</label>
                              <div class="zp-double-range">
                                <div class="zp-range-track"></div>
                                <input step="25" type="range" name="filter.v.price.gte" id="price-min" min="0" max="1000" value="0" />
                                <input step="25" type="range" name="filter.v.price.lte" id="price-max" min="0" max="1000" value="100" />
                                <div class="values">
                                  <div class="min-val">
                                    <span class="counter">15</span><span> $</span>
                                  </div>
                                  <div class="max-val">
                                    <span class="counter">100</span><span> $</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          -->

                          <!-- price double range -->

                          {% assign range_max = filter.range_max | divided_by: 100 %}

                          {% assign number = range_max %}
                          {% assign remainder = number | modulo: 25 %}
                          {% if remainder >= 13 %}
                            {% assign rounded_number = number | plus: 25 | minus: remainder %}
                          {% else %}
                            {% assign rounded_number = number | minus: remainder %}
                          {% endif %}

                          <div class="price-field price-ranges mobile {{ range_max | round: 25 }}">
                            <caption></caption>
                            <div class="zp-double-range">
                              <div class="zp-range-track"></div>
                              <input
                                step="25"
                                type="range"
                                name="filter.v.price.gte"
                                id="price-min"
                                min="0"
                                max="{{ rounded_number }}"
                                value="0"
                              >
                              <input
                                data-rangemax="{{ range_max }}"
                                step="25"
                                type="range"
                                name="filter.v.price.lte"
                                id="price-max"
                                min="0"
                                max="{{ rounded_number }}"
                                value="{{ rounded_number | plus: 25  }}"
                              >
                              <div class="values">
                                <div class="number-dollar-overlay">
                                  <p>FROM</p>
                                  <label class="number-dollar-input centered min-val">
                                    <span>$</span>
                                    <input class="no-qty price-range-value-1" value="0" type="number">
                                  </label>
                                </div>
                                <div class="number-dollar-overlay">
                                  <p>TO</p>
                                  <label class="number-dollar-input centered max-val">
                                    <span>$</span>
                                    <input
                                      class="no-qty price-range-value-2"
                                      value="{{ rounded_number }}"
                                      type="number"
                                    >
                                  </label>
                                </div>
                              </div>

                              <span class="range-min-number price-label">$ 0</span>
                              <span class="range-max-number price-label">$ {{ rounded_number }}</span>
                              {{- rounded_number }}
                            </div>
                          </div>
                        </div>
                        <div class="no-js-hidden mobile-facets__footer gradient mobile--filter-btns">
                          <a
                            type="button"
                            class=" hidden no-js-hidden underlined-link"
                            onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                            >Apply</a
                          >
                          <noscript><button class="button button--primary">Select</button></noscript>
                          <facet-remove class="mobile-facets__clear-wrapper">
                            <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link">Clear</a>
                          </facet-remove>
                        </div>
                      </details>
                  {% endcase %}
                {%- endfor -%}
              {%- endif -%}

              {%- comment -%}
                {%- if enable_sorting -%}
                  <div class="mobile-facets__details js-filter{% if filter_type == 'drawer' %} medium-hide large-up-hide{% endif %}" data-index="mobile-{{ forloop.index }}">
                    <div class="mobile-facets__summary">
                      <div class="mobile-facets__sort">
                        <label for="SortBy-mobile">Sort by:</label>
                        <div class="select">
                          <select name="sort_by" class="select__select" id="SortBy-mobile" aria-describedby="a11y-refresh-page-message">
                            {%- for option in results.sort_options -%}
                              <option value="{{ option.value | escape }}"{% if option.value == sort_by %} selected="selected"{% endif %}>{{ option.name | escape }}</option>
                            {%- endfor -%}
                          </select>
                          <svg width="16" height="16" class="icon icon-caret" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.5 11L4 7H11L7.5 11Z" fill="black"/>
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                {%- endif -%}
              {%- endcomment -%}

              <facet-remove class="mobile-facets__clear-wrapper">
                <a
                  href="javascript:void(0)"
                  class="mobile-facets__clear mobile-facets__btn underlined-link"
                  onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                  >Done</a
                >
                <a href="{{ results_url }}" class="mobile-facets__clear mobile-facets__btn underlined-link"
                  >Clear All</a
                >
              </facet-remove>

              {%- comment -%}
                <div class="mobile-facets__footer">
                  <button type="button" class="no-js-hidden button button--primary" onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()">Select</button>
                  <noscript><button class="button button--primary">Select</button></noscript>
                  <facet-remove class="mobile-facets__clear-wrapper">
                    <a href="{{ results_url }}" class="mobile-facets__clear underlined-link">Clear</a>
                  </facet-remove>
                </div>
              {%- endcomment -%}
            </div>

            {% if results.current_vendor or results.current_type %}
              <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
            {% endif %}

            {%- if results.terms -%}
              <input type="hidden" name="q" value="{{ results.terms | escape }}">
              <input name="options[prefix]" type="hidden" value="last">
            {%- endif -%}
          </div>
        </form>
      </facet-filters-form>
    </details>
  </menu-drawer>

  {% comment %} Sort, product count and filter pills at the end when filter is type of Drawer for the correct tabbing order {% endcomment %}
  {%- if enable_sorting and filter_type == 'drawer' -%}
    <facet-filters-form class="facets small-hide">
      <form id="FacetSortDrawerForm" class="facets__form">
        <div class="facet-filters sorting caption small-hide">
          <div class="facet-filters__field">
            <h2 class="facet-filters__label caption-large text-body">
              <label for="SortBy">Sort by:</label>
            </h2>
            <div class="select">
              {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
              <select
                name="sort_by"
                class="facet-filters__sort select__select caption-large"
                id="SortBy"
                aria-describedby="a11y-refresh-page-message"
              >
                <option
                  value="manual"
                  {% if sort_by == 'manual' %}
                    selected="selected"
                  {% endif %}
                >
                  Recommended
                </option>
                <option
                  value="created-descending"
                  {% if sort_by == 'created-descending' %}
                    selected="selected"
                  {% endif %}
                >
                  New In
                </option>
                <option
                  value="price-descending"
                  {% if sort_by == 'price-descending' %}
                    selected="selected"
                  {% endif %}
                >
                  Price High to Low
                </option>
                <option
                  value="price-ascending"
                  {% if sort_by == 'price-ascending' %}
                    selected="selected"
                  {% endif %}
                >
                  Price Low to High
                </option>
              </select>
              <svg
                width="16"
                height="16"
                class="icon icon-caret"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M7.5 11L4 7H11L7.5 11Z" fill="black"/>
              </svg>
            </div>
          </div>

          <noscript>
            <button type="submit" class="facets__button-no-js button button--secondary">Sort</button>
          </noscript>
        </div>

        {% if results.current_vendor or results.current_type %}
          <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
        {% endif %}

        {%- if results.terms -%}
          <input type="hidden" name="q" value="{{ results.terms | escape }}">
          <input name="options[prefix]" type="hidden" value="last">
        {%- endif -%}
      </form>
    </facet-filters-form>
  {%- endif -%}
  {%- if enable_grid_changer and filter_type == 'drawer' -%}
    <div class="grid-switcher">
      <div
        id="two-grid-switcher"
        class="grid-switcher-option {% if grid_count == 2 %}active{% endif %}"
        grid_count="2"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="33" height="18" viewBox="0 0 33 18" fill="none">
                  <rect x="0.5" y="0.5" width="15" height="17" fill="white"></rect>
          <rect x="17.5" y="0.5" width="15" height="17" fill="white"></rect>
        </svg>
      </div>
      <div
        id="three-grid-switcher"
        class="grid-switcher-option {% if grid_count == 3 %}active{% endif %}"
        grid_count="3"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="34" height="18" viewBox="0 0 34 18" fill="none">
          <rect x="0.5" y="0.5" width="9" height="17" fill="white"></rect>
          <rect x="12.5" y="0.5" width="9" height="17" fill="white"></rect>
          <rect x="24.5" y="0.5" width="9" height="17" fill="white"></rect>
        </svg>
      </div>
      <div
        id="four-grid-switcher"
        class="grid-switcher-option {% if grid_count == 4 %}active{% endif %}"
        grid_count="4"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="31" height="18" viewBox="0 0 31 18" fill="none">
          <rect x="0.5" y="0.5" width="6" height="7" fill="white"></rect>
          <rect x="0.5" y="10.5" width="6" height="7" fill="white"></rect>
          <rect x="8.5" y="0.5" width="6" height="7" fill="white"></rect>
          <rect x="8.5" y="10.5" width="6" height="7" fill="white"></rect>
          <rect x="16.5" y="0.5" width="6" height="7" fill="white"></rect>
          <rect x="16.5" y="10.5" width="6" height="7" fill="white"></rect>
          <rect x="24.5" y="0.5" width="6" height="7" fill="white"></rect>
          <rect x="24.5" y="10.5" width="6" height="7" fill="white"></rect>
        </svg>
      </div>
      <input type="hidden" name="view_on" id="view_on" value="{{ grid_count }}">
    </div>
  {% else %}
    <input type="hidden" name="view_on" id="view_on" value="{{ grid_count }}">
  {% endif %}
  {%- comment -%}
    <div class="product-count light{% if filter_type == 'vertical' or filter_type == 'horizontal' %} medium-hide large-up-hide{% endif %}" role="status">
      <h2 class="product-count__text text-body">
        <span id="ProductCount">
          {%- if results.results_count -%}
            {{ results.results_count }} result{% if results.results_count > 1 %}s{% endif %}
          {%- elsif results.products_count == results.all_products_count -%}
            {{ results.products_count }} product{% if results.products_count > 1 %}s{% endif %}
          {%- else -%}
            {{ results.products_count }} of {{ results.all_products_count }} product{% if results.products_count > 1 %}s{% endif %}
          {%- endif -%}
        </span>
      </h2>
      <div class="loading-overlay__spinner">
        <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
          <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
        </svg>
      </div>
    </div>
  {%- endcomment -%}
  {%- if enable_sorting -%}
    <facet-filters-form class="medium-hide large-up-hide">
      <form id="FacetFiltersFormMobileSort" class="mobile-facets__sort">
        <details
          id="Details-Mobile-sort_by-{{ section.id }}"
          class="sort-parent {% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
          data-index="mobile-sort_by"
        >
          <summary class="facets__summary caption-large focus-offset" aria-label="{{ filter.label }}">
            <div>
              <span>Sort By</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="25" viewBox="0 0 18 18" fill="none">
                <path d="M9.0001 11.2328C8.9001 11.2328 8.80335 11.2141 8.70985 11.1766C8.61585 11.1391 8.5376 11.0891 8.4751 11.0266L5.0251 7.57656C4.8876 7.43906 4.81885 7.26406 4.81885 7.05156C4.81885 6.83906 4.8876 6.66406 5.0251 6.52656C5.1626 6.38906 5.3376 6.32031 5.5501 6.32031C5.7626 6.32031 5.9376 6.38906 6.0751 6.52656L9.0001 9.45156L11.9251 6.52656C12.0626 6.38906 12.2376 6.32031 12.4501 6.32031C12.6626 6.32031 12.8376 6.38906 12.9751 6.52656C13.1126 6.66406 13.1813 6.83906 13.1813 7.05156C13.1813 7.26406 13.1126 7.43906 12.9751 7.57656L9.5251 11.0266C9.4501 11.1016 9.36885 11.1546 9.28135 11.1856C9.19385 11.2171 9.1001 11.2328 9.0001 11.2328Z" fill="black"></path>
              </svg>
            </div>
          </summary>
          <div
            id="Facet-sort_by-{{ section.id }}"
            class="parent-display {% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
          >
            <fieldset class="facets-wrap parent-wrap {% if filter_type == 'vertical' %} facets-wrap-vertical{% endif %}">
              <legend class="visually-hidden">Sort By</legend>
              <ul
                class="{% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden"
                role="list"
              >
                {%- liquid
                  assign sort_by = results.sort_by | default: results.default_sort_by
                  assign sortBysCustom = 'manual,created-descending,price-descending,price-ascending' | split: ','
                  assign sortBysLabelCustom = 'Recommended,New In,Price High to Low,Price Low to High' | split: ','
                -%}
                {%- for sortByCustom in sortBysCustom -%}
                  <li class="list-menu__item facets__item">
                    <input
                      type="radio"
                      name="sort_by"
                      value="{{ sortByCustom }}"
                      id="Filter-sort_by-{{ sortByCustom }}"
                      class="Filter-sort_by__mobile"
                      {% if sort_by == sortByCustom %}
                        checked
                      {% endif %}
                    >
                    <label for="Filter-sort_by-{{ sortByCustom }}" class="facet-checkbox facet-radio">
                      <svg width="1em" height="1em" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                        <rect width="14" height="14" stroke="currentColor" fill="none" stroke-width="2" x="1" y="1"></rect>
                      </svg>
                      <span aria-hidden="true">{{ sortBysLabelCustom[forloop.index0] }}</span>
                      <span class="visually-hidden">{{ sortBysLabelCustom[forloop.index0] }}</span>
                    </label>
                  </li>
                {%- endfor -%}
              </ul>
            </fieldset>
          </div>
        </details>
      </form>
    </facet-filters-form>
  {%- endif -%}
  {%- if filter_type == 'drawer' -%}
    <facet-filters-form class="facets facets-pill small-hide">
      <form id="FacetFiltersPillsForm" class="facets__form">
        <div class="active-facets active-facets-desktop">
          {%- for filter in results.filters -%}
            {%- for value in filter.active_values -%}
              <facet-remove>
                <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                  <span class="active-facets__button-inner button button--tertiary">
                    {{ filter.label }}: {{ value.label | escape }}
                    <svg
                      aria-hidden="true"
                      focusable="false"
                      role="presentation"
                      width="12"
                      height="13"
                      class="icon icon-close-small"
                      viewBox="0 0 12 13"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M8.48627 9.32917L2.82849 3.67098" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                      <path d="M2.88539 9.38504L8.42932 3.61524" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                    <span class="visually-hidden">Clear filter</span>
                  </span>
                </a>
              </facet-remove>
            {%- endfor -%}

            {%- if filter.type == 'price_range' -%}
              {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                <facet-remove>
                  <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                    <span class="active-facets__button-inner button button--tertiary">
                      {%- if filter.min_value.value -%}
                        {{ filter.min_value.value | money }}
                      {%- else -%}
                        {{ 0 | money }}
                      {%- endif -%}
                      -
                      {%- if filter.max_value.value -%}
                        {{ filter.max_value.value | money }}
                      {%- else -%}
                        {{ filter.range_max | money }}
                      {%- endif -%}
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        role="presentation"
                        width="12"
                        height="13"
                        class="icon icon-close-small"
                        viewBox="0 0 12 13"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path d="M8.48627 9.32917L2.82849 3.67098" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M2.88539 9.38504L8.42932 3.61524" stroke="#333030" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                      <span class="visually-hidden">Clear filter</span>
                    </span>
                  </a>
                </facet-remove>
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}
          <facet-remove class="active-facets__button-wrapper">
            <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
              <span>Clear</span>
            </a>
          </facet-remove>
        </div>
      </form>
    </facet-filters-form>
  {%- endif -%}
</div>

<style type="text/css">
  .filter_item.facets__details-list.facets__details-availability.disclosure-has-popup.facets__disclosure.js-filter[data-label="Availability"] {
    display: none;
  }
  /*
  #ProductGridContainer .collection.loading  {
    opacity: 0.2;
    z-index: 100;
  }
  */
  @media only screen and (max-width: 600px) {
    #ProductGridContainer .collection .loading-overlay {
        opacity: 0.5;
        z-index: 100;
    }
  }
</style>

<script>
  function roundToNearest(input, maxLimit) {
    const rounded = Math.round(input / 25) * 25;
    if (rounded > maxLimit) {
      return maxLimit;
    } else {
      return rounded;
    }
  }
</script>
